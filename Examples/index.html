
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../GettingStarted/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.33">
    
    
      
        <title>Examples - CSharp.Made.Functional Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#examples" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CSharp.Made.Functional Documentation" class="md-header__button md-logo" aria-label="CSharp.Made.Functional Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CSharp.Made.Functional Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Examples
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Examples

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../GettingStarted/" class="md-tabs__link">
        
  
    
  
  Getting Started

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CSharp.Made.Functional Documentation" class="md-nav__button md-logo" aria-label="CSharp.Made.Functional Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CSharp.Made.Functional Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Examples
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#option" class="md-nav__link">
    <span class="md-ellipsis">
      Option
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Option">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optional" class="md-nav__link">
    <span class="md-ellipsis">
      Optional
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#some-and-none" class="md-nav__link">
    <span class="md-ellipsis">
      Some and None
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map-filter-and-reduce" class="md-nav__link">
    <span class="md-ellipsis">
      Map, Filter, and Reduce
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-match" class="md-nav__link">
    <span class="md-ellipsis">
      Option Match
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-bind" class="md-nav__link">
    <span class="md-ellipsis">
      Option Bind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-effect" class="md-nav__link">
    <span class="md-ellipsis">
      Option Effect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-effectsome-and-effectnone" class="md-nav__link">
    <span class="md-ellipsis">
      Option EffectSome and EffectNone
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-tap-tapsome-and-tapnone" class="md-nav__link">
    <span class="md-ellipsis">
      Option Tap, TapSome and TapNone
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-unwrap" class="md-nav__link">
    <span class="md-ellipsis">
      Option Unwrap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async-options" class="md-nav__link">
    <span class="md-ellipsis">
      Async Options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#union" class="md-nav__link">
    <span class="md-ellipsis">
      Union
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Union">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-your-own-union" class="md-nav__link">
    <span class="md-ellipsis">
      Create your own Union
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errors-instead-of-exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      Errors instead of Exceptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#built-in-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Built-in Methods
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#result" class="md-nav__link">
    <span class="md-ellipsis">
      Result
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Result">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ok-and-error" class="md-nav__link">
    <span class="md-ellipsis">
      Ok and Error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map-and-reduce" class="md-nav__link">
    <span class="md-ellipsis">
      Map and Reduce
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Map Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-match" class="md-nav__link">
    <span class="md-ellipsis">
      Result Match
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-bind" class="md-nav__link">
    <span class="md-ellipsis">
      Result Bind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-effect" class="md-nav__link">
    <span class="md-ellipsis">
      Result Effect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-effectok-and-effecterror" class="md-nav__link">
    <span class="md-ellipsis">
      Result EffectOk and EffectError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-tap-tapok-and-taperror" class="md-nav__link">
    <span class="md-ellipsis">
      Result Tap, TapOk, and TapError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-unwrap-and-unwraperror" class="md-nav__link">
    <span class="md-ellipsis">
      Result Unwrap and UnwrapError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async-results" class="md-nav__link">
    <span class="md-ellipsis">
      Async Results
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      Common Extensions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Extensions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pipe" class="md-nav__link">
    <span class="md-ellipsis">
      Pipe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tap" class="md-nav__link">
    <span class="md-ellipsis">
      Tap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    <span class="md-ellipsis">
      Effect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cons" class="md-nav__link">
    <span class="md-ellipsis">
      Cons
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ignore" class="md-nav__link">
    <span class="md-ellipsis">
      Ignore
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exception-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Exception Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exception Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#try" class="md-nav__link">
    <span class="md-ellipsis">
      Try
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inner-exception-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Inner Exception Messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unit" class="md-nav__link">
    <span class="md-ellipsis">
      Unit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="examples">Examples</h1>
<h2 id="option">Option</h2>
<p>The Option type represents the concept that an item may or may not exist. In some ways C# already does this with the idea of the null value. However, in previous .NET and C# versions, objects could still be null even if their type signature indicated that they were a real, valid object. External packages may still have this issue, but internally you can force your code to obey the nullable rules using the Nullable directive in .NET 6 and later.</p>
<div class="highlight"><span class="filename">ScratchPad.csproj</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">&lt;Nullable&gt;</span>enable<span class="nt">&lt;/Nullable&gt;</span>
</code></pre></div>
<p>The following example shows how previous versions of .NET and C# would allow possible null returns. Using <code>FirstOrDefault</code> can produce a null value.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Valid or null...?</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span>
<span class="normal"><a href="#__codelineno-1-20">20</a></span>
<span class="normal"><a href="#__codelineno-1-21">21</a></span>
<span class="normal"><a href="#__codelineno-1-22">22</a></span>
<span class="normal"><a href="#__codelineno-1-23">23</a></span>
<span class="normal"><a href="#__codelineno-1-24">24</a></span>
<span class="normal"><a href="#__codelineno-1-25">25</a></span>
<span class="normal"><a href="#__codelineno-1-26">26</a></span>
<span class="normal"><a href="#__codelineno-1-27">27</a></span>
<span class="normal"><a href="#__codelineno-1-28">28</a></span>
<span class="normal"><a href="#__codelineno-1-29">29</a></span>
<span class="normal"><a href="#__codelineno-1-30">30</a></span>
<span class="normal"><a href="#__codelineno-1-31">31</a></span>
<span class="normal"><a href="#__codelineno-1-32">32</a></span>
<span class="normal"><a href="#__codelineno-1-33">33</a></span>
<span class="normal"><a href="#__codelineno-1-34">34</a></span>
<span class="normal"><a href="#__codelineno-1-35">35</a></span>
<span class="normal"><a href="#__codelineno-1-36">36</a></span>
<span class="normal"><a href="#__codelineno-1-37">37</a></span>
<span class="normal"><a href="#__codelineno-1-38">38</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">TodoItem</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Title</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">Completed</span><span class="p">);</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="p">{</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">TodoItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TodoItems</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">        </span><span class="k">new</span><span class="p">()</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">            </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;Use CSharp.Made.Functional&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">false</span><span class="p">),</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">            </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;Read the Docs&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a>
<a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">    </span><span class="c1">// Hides its true return type which should be &#39;TodoItem?&#39;</span>
<a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">TodoItem</span><span class="w"> </span><span class="nf">FindTodoItem</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">title</span><span class="p">)</span>
<a id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-1-22" name="__codelineno-1-22"></a>
<a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="hll"><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">todoItem</span><span class="w"> </span><span class="o">=</span>
</span><a id="__codelineno-1-24" name="__codelineno-1-24"></a><span class="w">            </span><span class="n">TodoItems</span>
<a id="__codelineno-1-25" name="__codelineno-1-25"></a><span class="w">                </span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">todo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todo</span><span class="p">.</span><span class="n">Title</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">title</span><span class="p">))</span>
<a id="__codelineno-1-26" name="__codelineno-1-26"></a><span class="w">                </span><span class="p">.</span><span class="n">FirstOrDefault</span><span class="p">();</span>
<a id="__codelineno-1-27" name="__codelineno-1-27"></a>
<a id="__codelineno-1-28" name="__codelineno-1-28"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">todoItem</span><span class="p">;</span>
<a id="__codelineno-1-29" name="__codelineno-1-29"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-1-30" name="__codelineno-1-30"></a>
<a id="__codelineno-1-31" name="__codelineno-1-31"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-1-32" name="__codelineno-1-32"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-1-33" name="__codelineno-1-33"></a><span class="hll"><span class="w">        </span><span class="n">TodoItem</span><span class="w"> </span><span class="n">todoItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FindTodoItem</span><span class="p">(</span><span class="s">&quot;Title Which Doesn&#39;t Exist&quot;</span><span class="p">);</span>
</span><a id="__codelineno-1-34" name="__codelineno-1-34"></a>
<a id="__codelineno-1-35" name="__codelineno-1-35"></a><span class="w">        </span><span class="c1">// What does this print?</span>
<a id="__codelineno-1-36" name="__codelineno-1-36"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">todoItem</span><span class="p">.</span><span class="n">Title</span><span class="p">);</span>
<a id="__codelineno-1-37" name="__codelineno-1-37"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-1-38" name="__codelineno-1-38"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="optional">Optional</h3>
<p>What if we could make the return type more explicit, beyond just changing the return type to <code>TodoItem?</code> for the <code>FindTodoItem</code> method? Shown in the example below, the <code>Option</code> type helps to declare that the return type might not exist. We can use the <code>Optional</code> extension to wrap values which may be null. When a value does not exist, it is represented by <code>None</code>. If a value exists, it is represented by <code>Some</code>.</p>
<p>There are ways to get the internal value of the Option and those will be described in later examples. Looking at the previous example again, let's use the Optional extension method to improve the function signature.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span>
<span class="normal"><a href="#__codelineno-2-31">31</a></span>
<span class="normal"><a href="#__codelineno-2-32">32</a></span>
<span class="normal"><a href="#__codelineno-2-33">33</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">TodoItem</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Title</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">Completed</span><span class="p">);</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="p">{</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">TodoItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TodoItems</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">        </span><span class="k">new</span><span class="p">()</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">            </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;Use CSharp.Made.Functional&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">false</span><span class="p">),</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">            </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;Read the Docs&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">    </span><span class="c1">// Honest function signature which indicates optional value.</span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Option</span><span class="o">&lt;</span><span class="n">TodoItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TryFindTodoItem</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">title</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
</span><a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="w">        </span><span class="n">TodoItems</span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="w">            </span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">todo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todo</span><span class="p">.</span><span class="n">Title</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">title</span><span class="p">))</span>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a><span class="w">            </span><span class="p">.</span><span class="n">FirstOrDefault</span><span class="p">()</span>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Optional</span><span class="p">();</span>
</span><a id="__codelineno-2-26" name="__codelineno-2-26"></a>
<a id="__codelineno-2-27" name="__codelineno-2-27"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="w">        </span><span class="n">Option</span><span class="o">&lt;</span><span class="n">TodoItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">todoItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TryFindTodoItem</span><span class="p">(</span><span class="s">&quot;Title Which Doesn&#39;t Exist&quot;</span><span class="p">);</span>
<a id="__codelineno-2-30" name="__codelineno-2-30"></a>
<a id="__codelineno-2-31" name="__codelineno-2-31"></a><span class="w">        </span><span class="c1">// Ok, but how do we print the title now?</span>
<a id="__codelineno-2-32" name="__codelineno-2-32"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-33" name="__codelineno-2-33"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="some-and-none">Some and None</h3>
<p>To create a <code>Some</code> or <code>None</code> directly, without using the <code>Optional</code> extension, the <code>Prelude</code> class provides helpers for this.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="p">{</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">someMessage</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">            </span><span class="c1">// Type is inferred to be string.</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="hll"><span class="w">            </span><span class="n">Some</span><span class="p">(</span><span class="s">&quot;Hello, world&quot;</span><span class="p">)</span>
</span><a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="w">                </span><span class="p">.</span><span class="n">Reduce</span><span class="p">(</span><span class="s">&quot;Won&#39;t be me!&quot;</span><span class="p">);</span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">noneMessage</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="w">            </span><span class="c1">// Type can&#39;t be inferred, so one must be provided.</span>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a><span class="hll"><span class="w">            </span><span class="n">None</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">()</span>
</span><a id="__codelineno-3-19" name="__codelineno-3-19"></a><span class="w">                </span><span class="p">.</span><span class="n">Reduce</span><span class="p">(</span><span class="s">&quot;It was None&quot;</span><span class="p">);</span>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="w">        </span><span class="c1">// Prints &quot;Hello, world&quot;</span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">someMessage</span><span class="p">);</span>
<a id="__codelineno-3-23" name="__codelineno-3-23"></a>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a><span class="w">        </span><span class="c1">// Prints &quot;It was None&quot;</span>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">noneMessage</span><span class="p">);</span>
<a id="__codelineno-3-26" name="__codelineno-3-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-3-27" name="__codelineno-3-27"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="map-filter-and-reduce">Map, Filter, and Reduce</h3>
<p>In the example showing the <code>Optional</code> extension, we improved the function 
signature of the <code>TryFindTodoItem</code> method. Let's go a step further and find 
out how we can actually get the value of out an <code>Option</code> type using 
<code>Map</code>, <code>Filter</code>, and <code>Reduce</code>. The <code>Map</code> method performs mapping on the 
internal type that is wrapped by the <code>Option</code>. In the example, our internal 
type is a <code>TodoItem</code>. Below we use it to get the title using <code>Map</code> in the case 
that the <code>Option</code> is a <code>Some</code>. How do we represent a title if the <code>Option</code> is <code>None</code>? 
This is where <code>Reduce</code> comes in. We can supply an alternate value directly, 
or we can supply a function that returns an alternate value. 
The function approach is useful in cases where getting an alternate value
might be computationally expensive. Finally, <code>Filter</code> is used to convert a 
<code>Some</code> to a <code>None</code> when the filter criteria evaluates to true.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span>
<span class="normal"><a href="#__codelineno-4-25">25</a></span>
<span class="normal"><a href="#__codelineno-4-26">26</a></span>
<span class="normal"><a href="#__codelineno-4-27">27</a></span>
<span class="normal"><a href="#__codelineno-4-28">28</a></span>
<span class="normal"><a href="#__codelineno-4-29">29</a></span>
<span class="normal"><a href="#__codelineno-4-30">30</a></span>
<span class="normal"><a href="#__codelineno-4-31">31</a></span>
<span class="normal"><a href="#__codelineno-4-32">32</a></span>
<span class="normal"><a href="#__codelineno-4-33">33</a></span>
<span class="normal"><a href="#__codelineno-4-34">34</a></span>
<span class="normal"><a href="#__codelineno-4-35">35</a></span>
<span class="normal"><a href="#__codelineno-4-36">36</a></span>
<span class="normal"><a href="#__codelineno-4-37">37</a></span>
<span class="normal"><a href="#__codelineno-4-38">38</a></span>
<span class="normal"><a href="#__codelineno-4-39">39</a></span>
<span class="normal"><a href="#__codelineno-4-40">40</a></span>
<span class="normal"><a href="#__codelineno-4-41">41</a></span>
<span class="normal"><a href="#__codelineno-4-42">42</a></span>
<span class="normal"><a href="#__codelineno-4-43">43</a></span>
<span class="normal"><a href="#__codelineno-4-44">44</a></span>
<span class="normal"><a href="#__codelineno-4-45">45</a></span>
<span class="normal"><a href="#__codelineno-4-46">46</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">TodoItem</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Title</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">Completed</span><span class="p">);</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="p">{</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">TodoItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TodoItems</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="w">        </span><span class="k">new</span><span class="p">()</span>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="w">            </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;Use CSharp.Made.Functional&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">false</span><span class="p">),</span>
<a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="w">            </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;Read the Docs&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-4-19" name="__codelineno-4-19"></a>
<a id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Option</span><span class="o">&lt;</span><span class="n">TodoItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TryFindTodoItem</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">title</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="w">        </span><span class="n">TodoItems</span>
<a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="w">            </span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">todo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todo</span><span class="p">.</span><span class="n">Title</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">title</span><span class="p">))</span>
<a id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="w">            </span><span class="p">.</span><span class="n">FirstOrDefault</span><span class="p">()</span>
<a id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="w">            </span><span class="p">.</span><span class="n">Optional</span><span class="p">();</span>
<a id="__codelineno-4-25" name="__codelineno-4-25"></a>
<a id="__codelineno-4-26" name="__codelineno-4-26"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-4-27" name="__codelineno-4-27"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-4-28" name="__codelineno-4-28"></a><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">readTheDocs</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-4-29" name="__codelineno-4-29"></a><span class="w">            </span><span class="n">TryFindTodoItem</span><span class="p">(</span><span class="s">&quot;Read&quot;</span><span class="p">)</span>
<a id="__codelineno-4-30" name="__codelineno-4-30"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">todoItem</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todoItem</span><span class="p">.</span><span class="n">Title</span><span class="p">)</span>
</span><a id="__codelineno-4-31" name="__codelineno-4-31"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">Reduce</span><span class="p">(</span><span class="s">&quot;Not Found&quot;</span><span class="p">);</span>
</span><a id="__codelineno-4-32" name="__codelineno-4-32"></a>
<a id="__codelineno-4-33" name="__codelineno-4-33"></a><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">notFound</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-4-34" name="__codelineno-4-34"></a><span class="w">            </span><span class="n">TryFindTodoItem</span><span class="p">(</span><span class="s">&quot;Read&quot;</span><span class="p">)</span>
<a id="__codelineno-4-35" name="__codelineno-4-35"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">Filter</span><span class="p">(</span><span class="n">todoItem</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todoItem</span><span class="p">.</span><span class="n">Completed</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">false</span><span class="p">)</span>
</span><a id="__codelineno-4-36" name="__codelineno-4-36"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">todoItem</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todoItem</span><span class="p">.</span><span class="n">Title</span><span class="p">)</span>
</span><a id="__codelineno-4-37" name="__codelineno-4-37"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">Reduce</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;Not Found&quot;</span><span class="p">);</span>
</span><a id="__codelineno-4-38" name="__codelineno-4-38"></a>
<a id="__codelineno-4-39" name="__codelineno-4-39"></a>
<a id="__codelineno-4-40" name="__codelineno-4-40"></a><span class="w">        </span><span class="c1">// Prints &quot;Read the Docs&quot; because the item exists.</span>
<a id="__codelineno-4-41" name="__codelineno-4-41"></a><span class="hll"><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">readTheDocs</span><span class="p">);</span>
</span><a id="__codelineno-4-42" name="__codelineno-4-42"></a><span class="hll">
</span><a id="__codelineno-4-43" name="__codelineno-4-43"></a><span class="w">        </span><span class="c1">// Prints &quot;Not Found&quot; because the TodoItem is Completed, so it is filtered out.</span>
<a id="__codelineno-4-44" name="__codelineno-4-44"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">notFound</span><span class="p">);</span>
<a id="__codelineno-4-45" name="__codelineno-4-45"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-4-46" name="__codelineno-4-46"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="option-match">Option Match</h3>
<p>Sometimes <code>Map</code> and <code>Reduce</code> may not feel like the right solution to a problem. 
In those cases it may feel more natural to reach for the <code>Match</code> method. 
<code>Match</code> expects two mapping functions to be provided to extract the value 
of the <code>Option</code>. See below for an alternate approach using <code>Match</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span>
<span class="normal"><a href="#__codelineno-5-26">26</a></span>
<span class="normal"><a href="#__codelineno-5-27">27</a></span>
<span class="normal"><a href="#__codelineno-5-28">28</a></span>
<span class="normal"><a href="#__codelineno-5-29">29</a></span>
<span class="normal"><a href="#__codelineno-5-30">30</a></span>
<span class="normal"><a href="#__codelineno-5-31">31</a></span>
<span class="normal"><a href="#__codelineno-5-32">32</a></span>
<span class="normal"><a href="#__codelineno-5-33">33</a></span>
<span class="normal"><a href="#__codelineno-5-34">34</a></span>
<span class="normal"><a href="#__codelineno-5-35">35</a></span>
<span class="normal"><a href="#__codelineno-5-36">36</a></span>
<span class="normal"><a href="#__codelineno-5-37">37</a></span>
<span class="normal"><a href="#__codelineno-5-38">38</a></span>
<span class="normal"><a href="#__codelineno-5-39">39</a></span>
<span class="normal"><a href="#__codelineno-5-40">40</a></span>
<span class="normal"><a href="#__codelineno-5-41">41</a></span>
<span class="normal"><a href="#__codelineno-5-42">42</a></span>
<span class="normal"><a href="#__codelineno-5-43">43</a></span>
<span class="normal"><a href="#__codelineno-5-44">44</a></span>
<span class="normal"><a href="#__codelineno-5-45">45</a></span>
<span class="normal"><a href="#__codelineno-5-46">46</a></span>
<span class="normal"><a href="#__codelineno-5-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">TodoItem</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Title</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">Completed</span><span class="p">);</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="p">{</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">TodoItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TodoItems</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">        </span><span class="k">new</span><span class="p">()</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="w">            </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;Use CSharp.Made.Functional&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">false</span><span class="p">),</span>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="w">            </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;Read the Docs&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Option</span><span class="o">&lt;</span><span class="n">TodoItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TryFindTodoItem</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">title</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a><span class="w">        </span><span class="n">TodoItems</span>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="w">            </span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">todo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todo</span><span class="p">.</span><span class="n">Title</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">title</span><span class="p">))</span>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a><span class="w">            </span><span class="p">.</span><span class="n">FirstOrDefault</span><span class="p">()</span>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="w">            </span><span class="p">.</span><span class="n">Optional</span><span class="p">();</span>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a>
<a id="__codelineno-5-26" name="__codelineno-5-26"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-5-27" name="__codelineno-5-27"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-5-28" name="__codelineno-5-28"></a><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">readTheDocs</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-5-29" name="__codelineno-5-29"></a><span class="w">            </span><span class="n">TryFindTodoItem</span><span class="p">(</span><span class="s">&quot;Read&quot;</span><span class="p">)</span>
<a id="__codelineno-5-30" name="__codelineno-5-30"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">Match</span><span class="p">(</span>
</span><a id="__codelineno-5-31" name="__codelineno-5-31"></a><span class="hll"><span class="w">                    </span><span class="n">todoItem</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todoItem</span><span class="p">.</span><span class="n">Title</span><span class="p">,</span>
</span><a id="__codelineno-5-32" name="__codelineno-5-32"></a><span class="hll"><span class="w">                    </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;Not Found&quot;</span><span class="p">);</span>
</span><a id="__codelineno-5-33" name="__codelineno-5-33"></a>
<a id="__codelineno-5-34" name="__codelineno-5-34"></a><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">notFound</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-5-35" name="__codelineno-5-35"></a><span class="w">            </span><span class="n">TryFindTodoItem</span><span class="p">(</span><span class="s">&quot;Read&quot;</span><span class="p">)</span>
<a id="__codelineno-5-36" name="__codelineno-5-36"></a><span class="w">                </span><span class="p">.</span><span class="n">Filter</span><span class="p">(</span><span class="n">todoItem</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todoItem</span><span class="p">.</span><span class="n">Completed</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">false</span><span class="p">)</span>
<a id="__codelineno-5-37" name="__codelineno-5-37"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">Match</span><span class="p">(</span>
</span><a id="__codelineno-5-38" name="__codelineno-5-38"></a><span class="hll"><span class="w">                    </span><span class="n">todoItem</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todoItem</span><span class="p">.</span><span class="n">Title</span><span class="p">,</span>
</span><a id="__codelineno-5-39" name="__codelineno-5-39"></a><span class="hll"><span class="w">                    </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;Not Found&quot;</span><span class="p">);</span>
</span><a id="__codelineno-5-40" name="__codelineno-5-40"></a>
<a id="__codelineno-5-41" name="__codelineno-5-41"></a><span class="w">        </span><span class="c1">// Prints &quot;Read the Docs&quot; because the item exists.</span>
<a id="__codelineno-5-42" name="__codelineno-5-42"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">readTheDocs</span><span class="p">);</span>
<a id="__codelineno-5-43" name="__codelineno-5-43"></a>
<a id="__codelineno-5-44" name="__codelineno-5-44"></a><span class="w">        </span><span class="c1">// Prints &quot;Not Found&quot; because the TodoItem is Completed, so it is filtered out.</span>
<a id="__codelineno-5-45" name="__codelineno-5-45"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">notFound</span><span class="p">);</span>
<a id="__codelineno-5-46" name="__codelineno-5-46"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-47" name="__codelineno-5-47"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="option-bind">Option Bind</h3>
<p>Since the <code>Map</code> function performs an action on an <code>Option</code> only when it 
is <code>Some</code>, the return type of <code>Map</code> is still <code>Option</code>. This means that 
inside the mapping operation, we usually want to do transformations 
that don't result in another <code>Option</code> type, otherwise we would end up 
with <code>Option&lt;Option&lt;T&gt;&gt;</code>. This is the reason for the <code>Bind</code> function. 
We can use <code>Bind</code> instead of <code>Map</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span>
<span class="normal"><a href="#__codelineno-6-21">21</a></span>
<span class="normal"><a href="#__codelineno-6-22">22</a></span>
<span class="normal"><a href="#__codelineno-6-23">23</a></span>
<span class="normal"><a href="#__codelineno-6-24">24</a></span>
<span class="normal"><a href="#__codelineno-6-25">25</a></span>
<span class="normal"><a href="#__codelineno-6-26">26</a></span>
<span class="normal"><a href="#__codelineno-6-27">27</a></span>
<span class="normal"><a href="#__codelineno-6-28">28</a></span>
<span class="normal"><a href="#__codelineno-6-29">29</a></span>
<span class="normal"><a href="#__codelineno-6-30">30</a></span>
<span class="normal"><a href="#__codelineno-6-31">31</a></span>
<span class="normal"><a href="#__codelineno-6-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="p">{</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">    </span><span class="c1">// This could be some database call which may result in None</span>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Option</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TryFindString</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
</span><a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">        </span><span class="n">Some</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a>
<a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">    </span><span class="c1">// Trivial example, but shows how mapping to an option requires Bind.</span>
<a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Option</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">NoEmptyStringsAllowed</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
</span><a id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">        </span><span class="kt">string</span><span class="p">.</span><span class="n">IsNullOrWhiteSpace</span><span class="p">(</span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="k">switch</span>
<a id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="w">            </span><span class="k">true</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(),</span>
<a id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="w">            </span><span class="k">false</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Some</span><span class="p">(</span><span class="n">input</span><span class="p">),</span>
<a id="__codelineno-6-20" name="__codelineno-6-20"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-6-21" name="__codelineno-6-21"></a>
<a id="__codelineno-6-22" name="__codelineno-6-22"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-6-23" name="__codelineno-6-23"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-6-24" name="__codelineno-6-24"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">toPrint</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-6-25" name="__codelineno-6-25"></a><span class="w">            </span><span class="n">TryFindString</span><span class="p">(</span><span class="s">&quot;Hello, World!&quot;</span><span class="p">)</span>
<a id="__codelineno-6-26" name="__codelineno-6-26"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">NoEmptyStringsAllowed</span><span class="p">)</span>
</span><a id="__codelineno-6-27" name="__codelineno-6-27"></a><span class="w">                </span><span class="p">.</span><span class="n">Reduce</span><span class="p">(</span><span class="s">&quot;Not Found&quot;</span><span class="p">);</span>
<a id="__codelineno-6-28" name="__codelineno-6-28"></a>
<a id="__codelineno-6-29" name="__codelineno-6-29"></a><span class="w">        </span><span class="c1">// Prints &quot;Hello, World!&quot;</span>
<a id="__codelineno-6-30" name="__codelineno-6-30"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">toPrint</span><span class="p">);</span>
<a id="__codelineno-6-31" name="__codelineno-6-31"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-32" name="__codelineno-6-32"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="option-effect">Option Effect</h3>
<p>If we just want to perform some <code>Action</code> which is somewhat of a side-effect, 
we can use the <code>Effect</code> method. Using the previous example, we can 
significantly simplify the code if we just want to do a single 
<code>Console.WriteLine</code>. We also don't have to print anything if the 
<code>TodoItem</code> is <code>None</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span>
<span class="normal"><a href="#__codelineno-7-15">15</a></span>
<span class="normal"><a href="#__codelineno-7-16">16</a></span>
<span class="normal"><a href="#__codelineno-7-17">17</a></span>
<span class="normal"><a href="#__codelineno-7-18">18</a></span>
<span class="normal"><a href="#__codelineno-7-19">19</a></span>
<span class="normal"><a href="#__codelineno-7-20">20</a></span>
<span class="normal"><a href="#__codelineno-7-21">21</a></span>
<span class="normal"><a href="#__codelineno-7-22">22</a></span>
<span class="normal"><a href="#__codelineno-7-23">23</a></span>
<span class="normal"><a href="#__codelineno-7-24">24</a></span>
<span class="normal"><a href="#__codelineno-7-25">25</a></span>
<span class="normal"><a href="#__codelineno-7-26">26</a></span>
<span class="normal"><a href="#__codelineno-7-27">27</a></span>
<span class="normal"><a href="#__codelineno-7-28">28</a></span>
<span class="normal"><a href="#__codelineno-7-29">29</a></span>
<span class="normal"><a href="#__codelineno-7-30">30</a></span>
<span class="normal"><a href="#__codelineno-7-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">TodoItem</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Title</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">Completed</span><span class="p">);</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="p">{</span>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">TodoItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TodoItems</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="w">        </span><span class="k">new</span><span class="p">()</span>
<a id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-7-16" name="__codelineno-7-16"></a><span class="w">            </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;Use CSharp.Made.Functional&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">false</span><span class="p">),</span>
<a id="__codelineno-7-17" name="__codelineno-7-17"></a><span class="w">            </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;Read the Docs&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<a id="__codelineno-7-18" name="__codelineno-7-18"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-7-19" name="__codelineno-7-19"></a>
<a id="__codelineno-7-20" name="__codelineno-7-20"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Option</span><span class="o">&lt;</span><span class="n">TodoItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TryFindTodoItem</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">title</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-7-21" name="__codelineno-7-21"></a><span class="w">        </span><span class="n">TodoItems</span>
<a id="__codelineno-7-22" name="__codelineno-7-22"></a><span class="w">            </span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">todo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todo</span><span class="p">.</span><span class="n">Title</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">title</span><span class="p">))</span>
<a id="__codelineno-7-23" name="__codelineno-7-23"></a><span class="w">            </span><span class="p">.</span><span class="n">FirstOrDefault</span><span class="p">()</span>
<a id="__codelineno-7-24" name="__codelineno-7-24"></a><span class="w">            </span><span class="p">.</span><span class="n">Optional</span><span class="p">();</span>
<a id="__codelineno-7-25" name="__codelineno-7-25"></a>
<a id="__codelineno-7-26" name="__codelineno-7-26"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-7-27" name="__codelineno-7-27"></a><span class="w">        </span><span class="n">TryFindTodoItem</span><span class="p">(</span><span class="s">&quot;Read&quot;</span><span class="p">)</span>
<a id="__codelineno-7-28" name="__codelineno-7-28"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Effect</span><span class="p">(</span>
</span><a id="__codelineno-7-29" name="__codelineno-7-29"></a><span class="hll"><span class="w">                </span><span class="n">todoItem</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">todoItem</span><span class="p">.</span><span class="n">Title</span><span class="p">),</span>
</span><a id="__codelineno-7-30" name="__codelineno-7-30"></a><span class="hll"><span class="w">                </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* We don&#39;t have to print anything actually... */</span><span class="w"> </span><span class="p">});</span>
</span><a id="__codelineno-7-31" name="__codelineno-7-31"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="option-effectsome-and-effectnone">Option EffectSome and EffectNone</h3>
<p>If we only want to perform an effect when an <code>Option</code> is <code>Some</code> or 
when it's <code>None</code>, we can use the <code>EffectSome</code> and <code>EffectNone</code> methods 
which will consume the <code>Option</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span>
<span class="normal"><a href="#__codelineno-8-18">18</a></span>
<span class="normal"><a href="#__codelineno-8-19">19</a></span>
<span class="normal"><a href="#__codelineno-8-20">20</a></span>
<span class="normal"><a href="#__codelineno-8-21">21</a></span>
<span class="normal"><a href="#__codelineno-8-22">22</a></span>
<span class="normal"><a href="#__codelineno-8-23">23</a></span>
<span class="normal"><a href="#__codelineno-8-24">24</a></span>
<span class="normal"><a href="#__codelineno-8-25">25</a></span>
<span class="normal"><a href="#__codelineno-8-26">26</a></span>
<span class="normal"><a href="#__codelineno-8-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="p">{</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">        </span><span class="c1">// This will print &quot;value&quot; to the console.</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">        </span><span class="n">Some</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">EffectSome</span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="k">value</span><span class="p">));</span>
</span><a id="__codelineno-8-14" name="__codelineno-8-14"></a>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="w">        </span><span class="c1">// This will do nothing since the input value was a None.</span>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="w">        </span><span class="n">None</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">()</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">EffectSome</span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="k">value</span><span class="p">));</span>
</span><a id="__codelineno-8-18" name="__codelineno-8-18"></a>
<a id="__codelineno-8-19" name="__codelineno-8-19"></a><span class="w">        </span><span class="c1">// This will do nothing since the input is a Some.</span>
<a id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="w">        </span><span class="n">Some</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span>
<a id="__codelineno-8-21" name="__codelineno-8-21"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">EffectNone</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;won&#39;t print&quot;</span><span class="p">));</span>
</span><a id="__codelineno-8-22" name="__codelineno-8-22"></a>
<a id="__codelineno-8-23" name="__codelineno-8-23"></a><span class="w">        </span><span class="c1">// This will print &quot;no value&quot; since the input was None.</span>
<a id="__codelineno-8-24" name="__codelineno-8-24"></a><span class="w">        </span><span class="n">None</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">()</span>
<a id="__codelineno-8-25" name="__codelineno-8-25"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">EffectNone</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;no value&quot;</span><span class="p">));</span>
</span><a id="__codelineno-8-26" name="__codelineno-8-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-27" name="__codelineno-8-27"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="option-tap-tapsome-and-tapnone">Option Tap, TapSome and TapNone</h3>
<p>If we want to <code>Tap</code> into the <code>Option</code> and perform some effect without 
consuming the value, we can use <code>Tap</code>, <code>TapSome</code>, and <code>TapNone</code>. 
With <code>Tap</code>, some kind of action must be provided for both 
the <code>Some</code> and <code>None</code> cases.</p>
<p>For <code>TapSome</code> and <code>TapNone</code>, one or more actions can be provided 
to occur when the <code>Option</code> meets that criteria. This will allow us 
to only perform actions when the value is <code>Some</code> or <code>None</code> for instance.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span>
<span class="normal"><a href="#__codelineno-9-19">19</a></span>
<span class="normal"><a href="#__codelineno-9-20">20</a></span>
<span class="normal"><a href="#__codelineno-9-21">21</a></span>
<span class="normal"><a href="#__codelineno-9-22">22</a></span>
<span class="normal"><a href="#__codelineno-9-23">23</a></span>
<span class="normal"><a href="#__codelineno-9-24">24</a></span>
<span class="normal"><a href="#__codelineno-9-25">25</a></span>
<span class="normal"><a href="#__codelineno-9-26">26</a></span>
<span class="normal"><a href="#__codelineno-9-27">27</a></span>
<span class="normal"><a href="#__codelineno-9-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="p">{</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">        </span><span class="c1">// Actions can be performed when some and none.</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="w">        </span><span class="n">Some</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Tap</span><span class="p">(</span><span class="n">some</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">some</span><span class="p">),</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;none&quot;</span><span class="p">))</span>
</span><a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="w">            </span><span class="c1">// The Option is not consumed so we can still use it afterwards.</span>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="w">            </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">some</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;!&quot;</span><span class="p">);</span>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="w">        </span><span class="c1">// We can do multiple things when the value is Some with a TapSome.</span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="w">        </span><span class="kt">string?</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<a id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="w">        </span><span class="n">Some</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span>
<a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">TapSome</span><span class="p">(</span>
</span><a id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="hll"><span class="w">                </span><span class="k">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="k">value</span><span class="p">),</span>
</span><a id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="hll"><span class="w">                </span><span class="k">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="p">);</span>
</span><a id="__codelineno-9-23" name="__codelineno-9-23"></a>
<a id="__codelineno-9-24" name="__codelineno-9-24"></a><span class="w">        </span><span class="c1">// Nothing happens here since the value is a None.</span>
<a id="__codelineno-9-25" name="__codelineno-9-25"></a><span class="w">        </span><span class="n">None</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">()</span>
<a id="__codelineno-9-26" name="__codelineno-9-26"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">TapSome</span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="k">value</span><span class="p">));</span>
</span><a id="__codelineno-9-27" name="__codelineno-9-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-9-28" name="__codelineno-9-28"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="option-unwrap">Option Unwrap</h3>
<p>If we need to get the value out of an <code>Option</code> for some reason and it's 
impractical to use <code>Match</code>, <code>Map</code>, <code>Tap</code>, or <code>Effect</code>, we can <code>Unwrap</code> the 
value to get its inner contents.
It's vital to check to see if the <code>Option</code> is <code>Some</code> before doing this, 
otherwise it will throw an exception!</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span>
<span class="normal"><a href="#__codelineno-10-18">18</a></span>
<span class="normal"><a href="#__codelineno-10-19">19</a></span>
<span class="normal"><a href="#__codelineno-10-20">20</a></span>
<span class="normal"><a href="#__codelineno-10-21">21</a></span>
<span class="normal"><a href="#__codelineno-10-22">22</a></span>
<span class="normal"><a href="#__codelineno-10-23">23</a></span>
<span class="normal"><a href="#__codelineno-10-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="p">{</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="w">        </span><span class="c1">// This will unwrap fine because the value is some.</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="hll"><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Some</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">).</span><span class="n">Unwrap</span><span class="p">();</span>
</span><a id="__codelineno-10-13" name="__codelineno-10-13"></a>
<a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="w">        </span><span class="c1">// This will throw an exception because the value is none.</span>
<a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="hll"><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">never</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">().</span><span class="n">Unwrap</span><span class="p">();</span>
</span><a id="__codelineno-10-16" name="__codelineno-10-16"></a>
<a id="__codelineno-10-17" name="__codelineno-10-17"></a><span class="w">        </span><span class="c1">// To do this safely, we need to always check the Option first!</span>
<a id="__codelineno-10-18" name="__codelineno-10-18"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">();</span>
<a id="__codelineno-10-19" name="__codelineno-10-19"></a><span class="hll"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">option</span><span class="p">.</span><span class="n">IsSome</span><span class="p">)</span>
</span><a id="__codelineno-10-20" name="__codelineno-10-20"></a><span class="hll"><span class="w">        </span><span class="p">{</span>
</span><a id="__codelineno-10-21" name="__codelineno-10-21"></a><span class="hll"><span class="w">            </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">option</span><span class="p">.</span><span class="n">Unwrap</span><span class="p">();</span>
</span><a id="__codelineno-10-22" name="__codelineno-10-22"></a><span class="hll"><span class="w">        </span><span class="p">}</span>
</span><a id="__codelineno-10-23" name="__codelineno-10-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-24" name="__codelineno-10-24"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="async-options">Async Options</h3>
<p>Asynchronous support is also provided in this library. The <code>Optional</code> extension 
also works on <code>Task&lt;T&gt;</code> where <code>T</code> is some type. This means that <code>Task&lt;T&gt;</code> 
or <code>Task&lt;T?&gt;</code> becomes <code>Task&lt;Option&lt;T&gt;&gt;</code>.</p>
<p>Async Option Methods:</p>
<ul>
<li><code>FilterAsync</code></li>
<li><code>MapAsync</code></li>
<li><code>ReduceAsync</code></li>
<li><code>MatchAsync</code></li>
<li><code>BindAsync</code></li>
<li><code>EffectAsync</code></li>
<li><code>EffectSomeAsync</code></li>
<li><code>EffectNoneAsync</code></li>
<li><code>TapAsync</code></li>
<li><code>TapSomeAsync</code></li>
<li><code>TapNoneAsync</code></li>
<li><code>UnwrapAsync</code></li>
<li><code>UnwrapErrorAsync</code></li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span>
<span class="normal"><a href="#__codelineno-11-15">15</a></span>
<span class="normal"><a href="#__codelineno-11-16">16</a></span>
<span class="normal"><a href="#__codelineno-11-17">17</a></span>
<span class="normal"><a href="#__codelineno-11-18">18</a></span>
<span class="normal"><a href="#__codelineno-11-19">19</a></span>
<span class="normal"><a href="#__codelineno-11-20">20</a></span>
<span class="normal"><a href="#__codelineno-11-21">21</a></span>
<span class="normal"><a href="#__codelineno-11-22">22</a></span>
<span class="normal"><a href="#__codelineno-11-23">23</a></span>
<span class="normal"><a href="#__codelineno-11-24">24</a></span>
<span class="normal"><a href="#__codelineno-11-25">25</a></span>
<span class="normal"><a href="#__codelineno-11-26">26</a></span>
<span class="normal"><a href="#__codelineno-11-27">27</a></span>
<span class="normal"><a href="#__codelineno-11-28">28</a></span>
<span class="normal"><a href="#__codelineno-11-29">29</a></span>
<span class="normal"><a href="#__codelineno-11-30">30</a></span>
<span class="normal"><a href="#__codelineno-11-31">31</a></span>
<span class="normal"><a href="#__codelineno-11-32">32</a></span>
<span class="normal"><a href="#__codelineno-11-33">33</a></span>
<span class="normal"><a href="#__codelineno-11-34">34</a></span>
<span class="normal"><a href="#__codelineno-11-35">35</a></span>
<span class="normal"><a href="#__codelineno-11-36">36</a></span>
<span class="normal"><a href="#__codelineno-11-37">37</a></span>
<span class="normal"><a href="#__codelineno-11-38">38</a></span>
<span class="normal"><a href="#__codelineno-11-39">39</a></span>
<span class="normal"><a href="#__codelineno-11-40">40</a></span>
<span class="normal"><a href="#__codelineno-11-41">41</a></span>
<span class="normal"><a href="#__codelineno-11-42">42</a></span>
<span class="normal"><a href="#__codelineno-11-43">43</a></span>
<span class="normal"><a href="#__codelineno-11-44">44</a></span>
<span class="normal"><a href="#__codelineno-11-45">45</a></span>
<span class="normal"><a href="#__codelineno-11-46">46</a></span>
<span class="normal"><a href="#__codelineno-11-47">47</a></span>
<span class="normal"><a href="#__codelineno-11-48">48</a></span>
<span class="normal"><a href="#__codelineno-11-49">49</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">TodoItem</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Title</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">Completed</span><span class="p">);</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="p">{</span>
<a id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">TodoItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TodoItems</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-11-15" name="__codelineno-11-15"></a><span class="w">        </span><span class="k">new</span><span class="p">()</span>
<a id="__codelineno-11-16" name="__codelineno-11-16"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-11-17" name="__codelineno-11-17"></a><span class="w">            </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;Use CSharp.Made.Functional&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">false</span><span class="p">),</span>
<a id="__codelineno-11-18" name="__codelineno-11-18"></a><span class="w">            </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;Read the Docs&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<a id="__codelineno-11-19" name="__codelineno-11-19"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-11-20" name="__codelineno-11-20"></a>
<a id="__codelineno-11-21" name="__codelineno-11-21"></a><span class="w">    </span><span class="c1">// AsAsync is an extension method to wrap an item with a Task.</span>
<a id="__codelineno-11-22" name="__codelineno-11-22"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">Option</span><span class="o">&lt;</span><span class="n">TodoItem</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">TryFindTodoItem</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">title</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-11-23" name="__codelineno-11-23"></a><span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="n">TodoItems</span>
<a id="__codelineno-11-24" name="__codelineno-11-24"></a><span class="w">            </span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">todo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todo</span><span class="p">.</span><span class="n">Title</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">title</span><span class="p">))</span>
<a id="__codelineno-11-25" name="__codelineno-11-25"></a><span class="w">            </span><span class="p">.</span><span class="n">FirstOrDefault</span><span class="p">()</span>
<a id="__codelineno-11-26" name="__codelineno-11-26"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Async</span><span class="p">()</span>
</span><a id="__codelineno-11-27" name="__codelineno-11-27"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Optional</span><span class="p">();</span>
</span><a id="__codelineno-11-28" name="__codelineno-11-28"></a>
<a id="__codelineno-11-29" name="__codelineno-11-29"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-11-30" name="__codelineno-11-30"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-11-31" name="__codelineno-11-31"></a><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">readTheDocs</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-11-32" name="__codelineno-11-32"></a><span class="w">            </span><span class="k">await</span><span class="w"> </span><span class="nf">TryFindTodoItem</span><span class="p">(</span><span class="s">&quot;Read&quot;</span><span class="p">)</span>
<a id="__codelineno-11-33" name="__codelineno-11-33"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">MapAsync</span><span class="p">(</span><span class="n">todoItem</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todoItem</span><span class="p">.</span><span class="n">Title</span><span class="p">)</span>
</span><a id="__codelineno-11-34" name="__codelineno-11-34"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">ReduceAsync</span><span class="p">(</span><span class="s">&quot;Not Found&quot;</span><span class="p">);</span>
</span><a id="__codelineno-11-35" name="__codelineno-11-35"></a>
<a id="__codelineno-11-36" name="__codelineno-11-36"></a><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">notFound</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-11-37" name="__codelineno-11-37"></a><span class="w">            </span><span class="k">await</span><span class="w"> </span><span class="nf">TryFindTodoItem</span><span class="p">(</span><span class="s">&quot;Read&quot;</span><span class="p">)</span>
<a id="__codelineno-11-38" name="__codelineno-11-38"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">FilterAsync</span><span class="p">(</span><span class="n">todoItem</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todoItem</span><span class="p">.</span><span class="n">Completed</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">false</span><span class="p">)</span>
</span><a id="__codelineno-11-39" name="__codelineno-11-39"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">MapAsync</span><span class="p">(</span><span class="n">todoItem</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">todoItem</span><span class="p">.</span><span class="n">Title</span><span class="p">)</span>
</span><a id="__codelineno-11-40" name="__codelineno-11-40"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">ReduceAsync</span><span class="p">(</span><span class="s">&quot;Not Found&quot;</span><span class="p">);</span>
</span><a id="__codelineno-11-41" name="__codelineno-11-41"></a>
<a id="__codelineno-11-42" name="__codelineno-11-42"></a>
<a id="__codelineno-11-43" name="__codelineno-11-43"></a><span class="w">        </span><span class="c1">// Prints &quot;Read the Docs&quot; because the item exists.</span>
<a id="__codelineno-11-44" name="__codelineno-11-44"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">readTheDocs</span><span class="p">);</span>
<a id="__codelineno-11-45" name="__codelineno-11-45"></a>
<a id="__codelineno-11-46" name="__codelineno-11-46"></a><span class="w">        </span><span class="c1">// Prints &quot;Not Found&quot; because the TodoItem is Completed, so it is filtered out.</span>
<a id="__codelineno-11-47" name="__codelineno-11-47"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">notFound</span><span class="p">);</span>
<a id="__codelineno-11-48" name="__codelineno-11-48"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-11-49" name="__codelineno-11-49"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="union">Union</h2>
<p>The Discriminated Union represents a type which may have multiple sub-types 
called variants. This is a very powerful concept which can be used to model 
many different real-world relationships in programming. Here is an example 
of what this looks like in F#. Using the built-in <code>match</code> expression in F#, 
we have a compile-time exhaustive match expression.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.fs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="k">type</span><span class="w"> </span><span class="nc">Animal</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Cat</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Dog</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Bird</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="k">let</span><span class="w"> </span><span class="nv">GetMysteryAnimal</span><span class="w"> </span><span class="bp">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Bird</span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="k">let</span><span class="w"> </span><span class="nv">MakeAnimalNoises</span><span class="w"> </span><span class="bp">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">GetMysteryAnimal</span><span class="bp">()</span><span class="w"> </span><span class="k">with</span>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Cat</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Meow&quot;</span>
<a id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Dog</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Ruff&quot;</span>
<a id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Bird</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Tweet&quot;</span>
</code></pre></div></td></tr></table></div>
<p>In C#, this concept is often modeled using inheritance. This also means that 
we can't predict every possible type which could inherit from the original 
<code>Animal</code> class. So, the switch expression is as close to the F# <code>match</code> as 
we can get. Unfortunately for us, we always have one last annoying discard case. 
At best, we have a case which is never used, but is required for the code to compile. 
At worst, we probably have undetected logic bugs. For instance, when 
another variant is added as an <code>Animal</code> type, which should have a real 
animal sound, it will return "What Goes Here" instead of a real value. 
We are sadly never alerted by the compiler that we haven't handled the new 
variant. Problematic, indeed.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span>
<span class="normal"><a href="#__codelineno-13-20">20</a></span>
<span class="normal"><a href="#__codelineno-13-21">21</a></span>
<span class="normal"><a href="#__codelineno-13-22">22</a></span>
<span class="normal"><a href="#__codelineno-13-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="hll"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Animal</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="hll"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Bird</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="hll"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Dog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="hll"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Cat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><a id="__codelineno-13-7" name="__codelineno-13-7"></a>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="p">{</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="nf">GetMysteryAnimal</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="nf">Bird</span><span class="p">();</span>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">MakeAnimalNoises</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="w">        </span><span class="n">GetMysteryAnimal</span><span class="p">()</span><span class="w"> </span><span class="k">switch</span>
<a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="w">            </span><span class="n">Bird</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;Tweet&quot;</span><span class="p">,</span>
<a id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="w">            </span><span class="n">Dog</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;Ruff&quot;</span><span class="p">,</span>
<a id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="w">            </span><span class="n">Cat</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;Meow&quot;</span><span class="p">,</span>
<a id="__codelineno-13-19" name="__codelineno-13-19"></a><span class="hll"><span class="w">            </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;What Goes Here?&quot;</span><span class="p">,</span>
</span><a id="__codelineno-13-20" name="__codelineno-13-20"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-13-21" name="__codelineno-13-21"></a>
<a id="__codelineno-13-22" name="__codelineno-13-22"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-13-23" name="__codelineno-13-23"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="create-your-own-union">Create your own Union</h3>
<p>What if we could have compile-time type checking that ensured we handled every 
variant? It is possible using the <code>Union</code> type. In fact, <code>Option</code> and <code>Result</code> 
use the <code>Union</code> type underneath. In order to ensure strong compile-time variant 
checking, there are different names for each <code>Union</code> type to handle different 
numbers of variants. For example, <code>Option</code> uses the regular <code>Union</code> type because 
it has two variants, <code>Some</code> and <code>None</code>. In our animal example, however, we have
3 variants that we care about. So in this case, we need to use <code>Union3</code>. The 
following list shows the maximum number of variants that are currently supported 
by this library. I would posit that if more variants are needed, it's possible 
that another data modeling strategy may be a better fit. Remember, every variant
must be handled, so for <code>Union9</code> this means that every match expression must 
have 9 different functions in order to handle every possible case.</p>
<p>Currently supported Unions:</p>
<ul>
<li><code>Union</code></li>
<li><code>Union3</code></li>
<li><code>Union4</code></li>
<li><code>Union5</code></li>
<li><code>Union6</code></li>
<li><code>Union7</code></li>
<li><code>Union8</code></li>
<li><code>Union9</code></li>
</ul>
<p>This implementation is a lot more verbose than the F# version, which is why C# 
needs built-in support for discriminated unions. However, it does accomplish 
the same goal. It is recommended that you seal any <code>Union</code> classes that you 
create in order to make sure that other classes cannot inherit from it. 
There must be a public constructor for each variant and no other constructors. 
It's also recommended that you implement the <code>Match</code> method as shown below 
to access the internal <code>Union</code> contents and use the underlying <code>Union.Match</code>
method. It is also recommended to create static factory methods named after 
each variant. This will simplify the way that <code>Animal</code> instances are created.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span>
<span class="normal"><a href="#__codelineno-14-12">12</a></span>
<span class="normal"><a href="#__codelineno-14-13">13</a></span>
<span class="normal"><a href="#__codelineno-14-14">14</a></span>
<span class="normal"><a href="#__codelineno-14-15">15</a></span>
<span class="normal"><a href="#__codelineno-14-16">16</a></span>
<span class="normal"><a href="#__codelineno-14-17">17</a></span>
<span class="normal"><a href="#__codelineno-14-18">18</a></span>
<span class="normal"><a href="#__codelineno-14-19">19</a></span>
<span class="normal"><a href="#__codelineno-14-20">20</a></span>
<span class="normal"><a href="#__codelineno-14-21">21</a></span>
<span class="normal"><a href="#__codelineno-14-22">22</a></span>
<span class="normal"><a href="#__codelineno-14-23">23</a></span>
<span class="normal"><a href="#__codelineno-14-24">24</a></span>
<span class="normal"><a href="#__codelineno-14-25">25</a></span>
<span class="normal"><a href="#__codelineno-14-26">26</a></span>
<span class="normal"><a href="#__codelineno-14-27">27</a></span>
<span class="normal"><a href="#__codelineno-14-28">28</a></span>
<span class="normal"><a href="#__codelineno-14-29">29</a></span>
<span class="normal"><a href="#__codelineno-14-30">30</a></span>
<span class="normal"><a href="#__codelineno-14-31">31</a></span>
<span class="normal"><a href="#__codelineno-14-32">32</a></span>
<span class="normal"><a href="#__codelineno-14-33">33</a></span>
<span class="normal"><a href="#__codelineno-14-34">34</a></span>
<span class="normal"><a href="#__codelineno-14-35">35</a></span>
<span class="normal"><a href="#__codelineno-14-36">36</a></span>
<span class="normal"><a href="#__codelineno-14-37">37</a></span>
<span class="normal"><a href="#__codelineno-14-38">38</a></span>
<span class="normal"><a href="#__codelineno-14-39">39</a></span>
<span class="normal"><a href="#__codelineno-14-40">40</a></span>
<span class="normal"><a href="#__codelineno-14-41">41</a></span>
<span class="normal"><a href="#__codelineno-14-42">42</a></span>
<span class="normal"><a href="#__codelineno-14-43">43</a></span>
<span class="normal"><a href="#__codelineno-14-44">44</a></span>
<span class="normal"><a href="#__codelineno-14-45">45</a></span>
<span class="normal"><a href="#__codelineno-14-46">46</a></span>
<span class="normal"><a href="#__codelineno-14-47">47</a></span>
<span class="normal"><a href="#__codelineno-14-48">48</a></span>
<span class="normal"><a href="#__codelineno-14-49">49</a></span>
<span class="normal"><a href="#__codelineno-14-50">50</a></span>
<span class="normal"><a href="#__codelineno-14-51">51</a></span>
<span class="normal"><a href="#__codelineno-14-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="k">public</span><span class="w"> </span><span class="k">sealed</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Animal</span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="p">{</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">Union3</span><span class="o">&lt;</span><span class="n">Bird</span><span class="p">,</span><span class="w"> </span><span class="n">Dog</span><span class="p">,</span><span class="w"> </span><span class="n">Cat</span><span class="o">&gt;</span><span class="w"> </span><span class="n">contents</span><span class="p">;</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">Animal</span><span class="p">(</span><span class="n">Bird</span><span class="w"> </span><span class="n">bird</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">contents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="n">bird</span><span class="p">);</span>
</span><a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">Animal</span><span class="p">(</span><span class="n">Cat</span><span class="w"> </span><span class="n">cat</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">contents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="n">cat</span><span class="p">);</span>
</span><a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">Animal</span><span class="p">(</span><span class="n">Dog</span><span class="w"> </span><span class="n">dog</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">contents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="n">dog</span><span class="p">);</span>
</span><a id="__codelineno-14-12" name="__codelineno-14-12"></a>
<a id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">Match</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Func</span><span class="o">&lt;</span><span class="n">Bird</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">whenBird</span><span class="p">,</span><span class="w"> </span><span class="n">Func</span><span class="o">&lt;</span><span class="n">Dog</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">whenDog</span><span class="p">,</span><span class="w"> </span><span class="n">Func</span><span class="o">&lt;</span><span class="n">Cat</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">whenCat</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
</span><a id="__codelineno-14-14" name="__codelineno-14-14"></a><span class="hll"><span class="w">        </span><span class="n">contents</span>
</span><a id="__codelineno-14-15" name="__codelineno-14-15"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Match</span><span class="p">(</span><span class="n">whenBird</span><span class="p">,</span><span class="w"> </span><span class="n">whenDog</span><span class="p">,</span><span class="w"> </span><span class="n">whenCat</span><span class="p">);</span>
</span><a id="__codelineno-14-16" name="__codelineno-14-16"></a>
<a id="__codelineno-14-17" name="__codelineno-14-17"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="nf">Cat</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Cat</span><span class="p">());</span>
</span><a id="__codelineno-14-18" name="__codelineno-14-18"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="nf">Dog</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Dog</span><span class="p">());</span>
</span><a id="__codelineno-14-19" name="__codelineno-14-19"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="nf">Bird</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Bird</span><span class="p">());</span>
</span><a id="__codelineno-14-20" name="__codelineno-14-20"></a><span class="p">}</span>
<a id="__codelineno-14-21" name="__codelineno-14-21"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">Bird</span><span class="p">()</span>
<a id="__codelineno-14-22" name="__codelineno-14-22"></a><span class="p">{</span>
<a id="__codelineno-14-23" name="__codelineno-14-23"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">Tweet</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;Tweet&quot;</span><span class="p">;</span>
<a id="__codelineno-14-24" name="__codelineno-14-24"></a><span class="p">}</span>
<a id="__codelineno-14-25" name="__codelineno-14-25"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">Cat</span><span class="p">()</span>
<a id="__codelineno-14-26" name="__codelineno-14-26"></a><span class="p">{</span>
<a id="__codelineno-14-27" name="__codelineno-14-27"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">Meow</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;Meow&quot;</span><span class="p">;</span>
<a id="__codelineno-14-28" name="__codelineno-14-28"></a><span class="p">}</span>
<a id="__codelineno-14-29" name="__codelineno-14-29"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">Dog</span><span class="p">()</span>
<a id="__codelineno-14-30" name="__codelineno-14-30"></a><span class="p">{</span>
<a id="__codelineno-14-31" name="__codelineno-14-31"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">Bark</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;Ruff&quot;</span><span class="p">;</span>
<a id="__codelineno-14-32" name="__codelineno-14-32"></a><span class="p">}</span>
<a id="__codelineno-14-33" name="__codelineno-14-33"></a>
<a id="__codelineno-14-34" name="__codelineno-14-34"></a>
<a id="__codelineno-14-35" name="__codelineno-14-35"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-14-36" name="__codelineno-14-36"></a><span class="p">{</span>
<a id="__codelineno-14-37" name="__codelineno-14-37"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="nf">GetMysteryAnimal</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-14-38" name="__codelineno-14-38"></a><span class="w">        </span><span class="n">Animal</span><span class="p">.</span><span class="n">Bird</span><span class="p">();</span>
<a id="__codelineno-14-39" name="__codelineno-14-39"></a>
<a id="__codelineno-14-40" name="__codelineno-14-40"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">MakeAnimalNoises</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-14-41" name="__codelineno-14-41"></a><span class="w">        </span><span class="n">GetMysteryAnimal</span><span class="p">()</span>
<a id="__codelineno-14-42" name="__codelineno-14-42"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Match</span><span class="p">(</span>
</span><a id="__codelineno-14-43" name="__codelineno-14-43"></a><span class="hll"><span class="w">                </span><span class="n">bird</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">bird</span><span class="p">.</span><span class="n">Tweet</span><span class="p">,</span>
</span><a id="__codelineno-14-44" name="__codelineno-14-44"></a><span class="hll"><span class="w">                </span><span class="n">dog</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">dog</span><span class="p">.</span><span class="n">Bark</span><span class="p">,</span>
</span><a id="__codelineno-14-45" name="__codelineno-14-45"></a><span class="hll"><span class="w">                </span><span class="n">cat</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">cat</span><span class="p">.</span><span class="n">Meow</span><span class="p">);</span>
</span><a id="__codelineno-14-46" name="__codelineno-14-46"></a>
<a id="__codelineno-14-47" name="__codelineno-14-47"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-14-48" name="__codelineno-14-48"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-14-49" name="__codelineno-14-49"></a><span class="w">        </span><span class="c1">// Prints &quot;Tweet&quot;</span>
<a id="__codelineno-14-50" name="__codelineno-14-50"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">MakeAnimalNoises</span><span class="p">());</span>
<a id="__codelineno-14-51" name="__codelineno-14-51"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-14-52" name="__codelineno-14-52"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="errors-instead-of-exceptions">Errors instead of Exceptions</h3>
<p>C# makes heavy use of exceptions, but not all behavior is truly exceptional. 
For instance, if an item can't be found in a database, should we throw a 
<code>NotFoundException</code> and cause the server to crash if it's not handled? 
Instead, we can use the <code>Union</code> type to create an error type which can be used 
to model errors that could happen during processing. Here is an example of 
an error which could happen when performing database operations with an 
<code>Animal</code> object. In a web application, instead of returning a string, 
we could match the type of error and return an <code>HttpResponse</code> related to 
that type of error as an example.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span>
<span class="normal"><a href="#__codelineno-15-14">14</a></span>
<span class="normal"><a href="#__codelineno-15-15">15</a></span>
<span class="normal"><a href="#__codelineno-15-16">16</a></span>
<span class="normal"><a href="#__codelineno-15-17">17</a></span>
<span class="normal"><a href="#__codelineno-15-18">18</a></span>
<span class="normal"><a href="#__codelineno-15-19">19</a></span>
<span class="normal"><a href="#__codelineno-15-20">20</a></span>
<span class="normal"><a href="#__codelineno-15-21">21</a></span>
<span class="normal"><a href="#__codelineno-15-22">22</a></span>
<span class="normal"><a href="#__codelineno-15-23">23</a></span>
<span class="normal"><a href="#__codelineno-15-24">24</a></span>
<span class="normal"><a href="#__codelineno-15-25">25</a></span>
<span class="normal"><a href="#__codelineno-15-26">26</a></span>
<span class="normal"><a href="#__codelineno-15-27">27</a></span>
<span class="normal"><a href="#__codelineno-15-28">28</a></span>
<span class="normal"><a href="#__codelineno-15-29">29</a></span>
<span class="normal"><a href="#__codelineno-15-30">30</a></span>
<span class="normal"><a href="#__codelineno-15-31">31</a></span>
<span class="normal"><a href="#__codelineno-15-32">32</a></span>
<span class="normal"><a href="#__codelineno-15-33">33</a></span>
<span class="normal"><a href="#__codelineno-15-34">34</a></span>
<span class="normal"><a href="#__codelineno-15-35">35</a></span>
<span class="normal"><a href="#__codelineno-15-36">36</a></span>
<span class="normal"><a href="#__codelineno-15-37">37</a></span>
<span class="normal"><a href="#__codelineno-15-38">38</a></span>
<span class="normal"><a href="#__codelineno-15-39">39</a></span>
<span class="normal"><a href="#__codelineno-15-40">40</a></span>
<span class="normal"><a href="#__codelineno-15-41">41</a></span>
<span class="normal"><a href="#__codelineno-15-42">42</a></span>
<span class="normal"><a href="#__codelineno-15-43">43</a></span>
<span class="normal"><a href="#__codelineno-15-44">44</a></span>
<span class="normal"><a href="#__codelineno-15-45">45</a></span>
<span class="normal"><a href="#__codelineno-15-46">46</a></span>
<span class="normal"><a href="#__codelineno-15-47">47</a></span>
<span class="normal"><a href="#__codelineno-15-48">48</a></span>
<span class="normal"><a href="#__codelineno-15-49">49</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="k">public</span><span class="w"> </span><span class="k">sealed</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">AnimalError</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="p">{</span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">Union3</span><span class="o">&lt;</span><span class="n">NotFound</span><span class="p">,</span><span class="w"> </span><span class="n">Invalid</span><span class="p">,</span><span class="w"> </span><span class="n">Unhandled</span><span class="o">&gt;</span><span class="w"> </span><span class="n">contents</span><span class="p">;</span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">AnimalError</span><span class="p">(</span><span class="n">NotFound</span><span class="w"> </span><span class="n">notFound</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">contents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="n">notFound</span><span class="p">);</span>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">AnimalError</span><span class="p">(</span><span class="n">Invalid</span><span class="w"> </span><span class="n">invalid</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">contents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="n">invalid</span><span class="p">);</span>
<a id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">AnimalError</span><span class="p">(</span><span class="n">Unhandled</span><span class="w"> </span><span class="n">unhandled</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">contents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="n">unhandled</span><span class="p">);</span>
<a id="__codelineno-15-12" name="__codelineno-15-12"></a>
<a id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">Match</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Func</span><span class="o">&lt;</span><span class="n">NotFound</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">notFound</span><span class="p">,</span><span class="w"> </span><span class="n">Func</span><span class="o">&lt;</span><span class="n">Invalid</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">invalid</span><span class="p">,</span><span class="w"> </span><span class="n">Func</span><span class="o">&lt;</span><span class="n">Unhandled</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">unhandled</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="w">        </span><span class="n">contents</span>
<a id="__codelineno-15-15" name="__codelineno-15-15"></a><span class="w">            </span><span class="p">.</span><span class="n">Match</span><span class="p">(</span><span class="n">notFound</span><span class="p">,</span><span class="w"> </span><span class="n">invalid</span><span class="p">,</span><span class="w"> </span><span class="n">unhandled</span><span class="p">);</span>
<a id="__codelineno-15-16" name="__codelineno-15-16"></a>
<a id="__codelineno-15-17" name="__codelineno-15-17"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">AnimalError</span><span class="w"> </span><span class="nf">NotFound</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">NotFound</span><span class="p">());</span>
<a id="__codelineno-15-18" name="__codelineno-15-18"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">AnimalError</span><span class="w"> </span><span class="nf">Invalid</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Invalid</span><span class="p">());</span>
<a id="__codelineno-15-19" name="__codelineno-15-19"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">AnimalError</span><span class="w"> </span><span class="nf">Unhandled</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Unhandled</span><span class="p">());</span>
<a id="__codelineno-15-20" name="__codelineno-15-20"></a><span class="p">}</span>
<a id="__codelineno-15-21" name="__codelineno-15-21"></a>
<a id="__codelineno-15-22" name="__codelineno-15-22"></a><span class="c1">// Like a 404</span>
<a id="__codelineno-15-23" name="__codelineno-15-23"></a><span class="hll"><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">NotFound</span><span class="p">();</span>
</span><a id="__codelineno-15-24" name="__codelineno-15-24"></a>
<a id="__codelineno-15-25" name="__codelineno-15-25"></a><span class="c1">// Like a 400</span>
<a id="__codelineno-15-26" name="__codelineno-15-26"></a><span class="hll"><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">Invalid</span><span class="p">();</span>
</span><a id="__codelineno-15-27" name="__codelineno-15-27"></a>
<a id="__codelineno-15-28" name="__codelineno-15-28"></a><span class="c1">// Like a 500</span>
<a id="__codelineno-15-29" name="__codelineno-15-29"></a><span class="hll"><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">Unhandled</span><span class="p">();</span>
</span><a id="__codelineno-15-30" name="__codelineno-15-30"></a>
<a id="__codelineno-15-31" name="__codelineno-15-31"></a>
<a id="__codelineno-15-32" name="__codelineno-15-32"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-15-33" name="__codelineno-15-33"></a><span class="p">{</span>
<a id="__codelineno-15-34" name="__codelineno-15-34"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">AnimalError</span><span class="w"> </span><span class="nf">DatabaseOperationWhichErrors</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-15-35" name="__codelineno-15-35"></a><span class="w">        </span><span class="n">AnimalError</span><span class="p">.</span><span class="n">NotFound</span><span class="p">();</span>
<a id="__codelineno-15-36" name="__codelineno-15-36"></a>
<a id="__codelineno-15-37" name="__codelineno-15-37"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">CreateNewAnimal</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-15-38" name="__codelineno-15-38"></a><span class="w">        </span><span class="n">DatabaseOperationWhichErrors</span><span class="p">()</span>
<a id="__codelineno-15-39" name="__codelineno-15-39"></a><span class="w">            </span><span class="p">.</span><span class="n">Match</span><span class="p">(</span>
<a id="__codelineno-15-40" name="__codelineno-15-40"></a><span class="w">                </span><span class="n">notFound</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;Animal was not found&quot;</span><span class="p">,</span>
<a id="__codelineno-15-41" name="__codelineno-15-41"></a><span class="w">                </span><span class="n">invalid</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;The animal was invalid&quot;</span><span class="p">,</span>
<a id="__codelineno-15-42" name="__codelineno-15-42"></a><span class="w">                </span><span class="n">unhandled</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;Something unexpected happened&quot;</span><span class="p">);</span>
<a id="__codelineno-15-43" name="__codelineno-15-43"></a>
<a id="__codelineno-15-44" name="__codelineno-15-44"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-15-45" name="__codelineno-15-45"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-15-46" name="__codelineno-15-46"></a><span class="w">        </span><span class="c1">// Prints &quot;Animal was not found&quot;</span>
<a id="__codelineno-15-47" name="__codelineno-15-47"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">CreateNewAnimal</span><span class="p">());</span>
<a id="__codelineno-15-48" name="__codelineno-15-48"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-49" name="__codelineno-15-49"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="built-in-methods">Built-in Methods</h3>
<p>All of the <code>Union</code> variants have <code>Effect</code> and <code>Match</code> built-in. This means that
if you create a custom <code>Union</code> type, you can use the inner <code>Union</code> built-in 
methods to expose public versions on your custom <code>Union</code> type. An example of 
this is shown in the previous <code>Animal</code> example with the <code>Match</code> method.</p>
<h2 id="result">Result</h2>
<p>In the previous example, the database operation only ever returned an error. 
But in real life, database operations would produce a good result sometimes, 
and an error result other times. We could roughly categorize these as successes 
and failures. In trying to keep with the same syntax as F#, this library calls 
successes <code>Ok</code> and failures <code>Error</code>. This is what a <code>Result</code> looks like in F#.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.fs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="k">open</span><span class="w"> </span><span class="nn">System</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="k">type</span><span class="w"> </span><span class="nc">CustomError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">message</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">}</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="k">let</span><span class="w"> </span><span class="nv">NoEmptyStrings</span><span class="w"> </span><span class="o">(</span><span class="n">input</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">,</span><span class="w"> </span><span class="n">CustomError</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">    </span><span class="n">input</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">String</span><span class="p">.</span><span class="n">IsNullOrWhiteSpace</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="k">function</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="hll"><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Empty strings are not allowed.&quot;</span><span class="w"> </span><span class="o">}</span>
</span><a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="hll"><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Ok</span><span class="w"> </span><span class="n">input</span>
</span></code></pre></div></td></tr></table></div>
<p>If you're not accustomed to F#, try not to focus too much on the syntax, 
just recognize that we can return either an <code>Ok</code> or an <code>Error</code> from the 
function and that's perfectly fine. In the example you will notice a few 
operators called <code>Pipe</code> which look like this <code>|&gt;</code>. We will cover how 
CSharp.Made.Functional includes a similar feature in later discussions.</p>
<p>Using the previous database example, let's now take a look at how we can use 
the <code>Result</code> type to handle cases where the return type might be <code>Ok</code> and 
sometimes it might be <code>Error</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span>
<span class="normal"><a href="#__codelineno-17-19">19</a></span>
<span class="normal"><a href="#__codelineno-17-20">20</a></span>
<span class="normal"><a href="#__codelineno-17-21">21</a></span>
<span class="normal"><a href="#__codelineno-17-22">22</a></span>
<span class="normal"><a href="#__codelineno-17-23">23</a></span>
<span class="normal"><a href="#__codelineno-17-24">24</a></span>
<span class="normal"><a href="#__codelineno-17-25">25</a></span>
<span class="normal"><a href="#__codelineno-17-26">26</a></span>
<span class="normal"><a href="#__codelineno-17-27">27</a></span>
<span class="normal"><a href="#__codelineno-17-28">28</a></span>
<span class="normal"><a href="#__codelineno-17-29">29</a></span>
<span class="normal"><a href="#__codelineno-17-30">30</a></span>
<span class="normal"><a href="#__codelineno-17-31">31</a></span>
<span class="normal"><a href="#__codelineno-17-32">32</a></span>
<span class="normal"><a href="#__codelineno-17-33">33</a></span>
<span class="normal"><a href="#__codelineno-17-34">34</a></span>
<span class="normal"><a href="#__codelineno-17-35">35</a></span>
<span class="normal"><a href="#__codelineno-17-36">36</a></span>
<span class="normal"><a href="#__codelineno-17-37">37</a></span>
<span class="normal"><a href="#__codelineno-17-38">38</a></span>
<span class="normal"><a href="#__codelineno-17-39">39</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">NotFoundError</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="p">{</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="w">    </span><span class="c1">// Let&#39;s use random to decide if finding the string succeeded or not.</span>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="w">    </span><span class="c1">// Imagine this is a database call or some other error prone operation.</span>
<a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Option</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TryFindString</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="w">        </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Random</span><span class="p">().</span><span class="n">Next</span><span class="p">(</span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="k">switch</span>
<a id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="w">            </span><span class="k">true</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Some</span><span class="p">(</span><span class="n">input</span><span class="p">),</span>
<a id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="w">            </span><span class="k">false</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">()</span>
<a id="__codelineno-17-20" name="__codelineno-17-20"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-17-21" name="__codelineno-17-21"></a>
<a id="__codelineno-17-22" name="__codelineno-17-22"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="n">NotFoundError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">StringFindingService</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-17-23" name="__codelineno-17-23"></a><span class="w">        </span><span class="n">TryFindString</span><span class="p">(</span><span class="n">input</span><span class="p">)</span>
<a id="__codelineno-17-24" name="__codelineno-17-24"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">Ok</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="n">NotFoundError</span><span class="o">&gt;</span><span class="p">)</span>
</span><a id="__codelineno-17-25" name="__codelineno-17-25"></a><span class="w">            </span><span class="p">.</span><span class="n">Reduce</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-17-26" name="__codelineno-17-26"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">NotFoundError</span><span class="p">(</span><span class="s">$&quot;&#39;{input}&#39; was not found.&quot;</span><span class="p">)</span>
<a id="__codelineno-17-27" name="__codelineno-17-27"></a><span class="hll"><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="n">NotFoundError</span><span class="o">&gt;</span><span class="p">));</span>
</span><a id="__codelineno-17-28" name="__codelineno-17-28"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-17-29" name="__codelineno-17-29"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-17-30" name="__codelineno-17-30"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<a id="__codelineno-17-31" name="__codelineno-17-31"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-17-32" name="__codelineno-17-32"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-17-33" name="__codelineno-17-33"></a><span class="w">                </span><span class="n">StringFindingService</span><span class="p">(</span><span class="s">&quot;Hello, Results!&quot;</span><span class="p">)</span>
<a id="__codelineno-17-34" name="__codelineno-17-34"></a><span class="w">                    </span><span class="p">.</span><span class="n">Reduce</span><span class="p">(</span><span class="n">error</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">error</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-17-35" name="__codelineno-17-35"></a>
<a id="__codelineno-17-36" name="__codelineno-17-36"></a><span class="w">            </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<a id="__codelineno-17-37" name="__codelineno-17-37"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-17-38" name="__codelineno-17-38"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-39" name="__codelineno-17-39"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The example shows how we can use <code>Ok</code> and <code>Error</code> to return a 
<code>Result</code> type. In C#, we need to be a little bit more explicit about the 
types to make the compiler happy, so this is why the example is using 
<code>Ok&lt;string, NotFoundError&gt;</code> where in F# that wouldn't be needed. Astute 
observers would also notice that there are similar methods on <code>Result</code> as 
there are on <code>Option</code>, which is quite on purpose. The aim of this library 
is to be consistent and easy to use. It will feel much more natural to reach 
for <code>Match</code>, <code>Map</code>, and <code>Reduce</code> when they're used for multiple types throughout 
the library.</p>
<h3 id="ok-and-error">Ok and Error</h3>
<p>To create a <code>Result</code> that is either <code>Ok</code> or <code>Error</code>, simply use the convenience 
methods on the <code>Prelude</code> class. As shown below, the type signatures can get quite 
long sometimes. In most cases I prefer to use <code>var</code> instead of the specific type, 
but for clarity I have shown them here. In the example below, I have created 
a simple <code>NotFoundError</code> type, but using what was discussed in the <code>Union</code> 
section, this could also easily be a <code>Union</code> type with multiple error variants. 
This is where the <code>Result</code> type really shines.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-18-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-18-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-18-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-18-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-18-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-18-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-18-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span>
<span class="normal"><a href="#__codelineno-18-12">12</a></span>
<span class="normal"><a href="#__codelineno-18-13">13</a></span>
<span class="normal"><a href="#__codelineno-18-14">14</a></span>
<span class="normal"><a href="#__codelineno-18-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional.Results</span><span class="p">;</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">NotFoundError</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="p">{</span>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="w">        </span><span class="n">Result</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="n">NotFoundError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ok</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ok</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="n">NotFoundError</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;It&#39;s okay&quot;</span><span class="p">);</span>
<a id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="w">        </span><span class="n">Result</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="n">NotFoundError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<a id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="w">            </span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="n">NotFoundError</span><span class="o">&gt;</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">NotFoundError</span><span class="p">(</span><span class="s">&quot;An error message&quot;</span><span class="p">));</span>
<a id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-18-15" name="__codelineno-18-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="map-and-reduce">Map and Reduce</h3>
<p>Just like the <code>Option</code> type, <code>Result</code> has <code>Map</code> and <code>Reduce</code> methods. <code>Map</code>
works exactly the same way, in that if the <code>Result</code> is <code>Ok</code>, then it performs 
the mapping function on the inner contents. <code>Reduce</code>, however has multiple 
overloaded methods. It can be used in a way that discards the error and returns 
an alternate value, or it can use the error to then create the alternate value.</p>
<p>The <code>Map</code> function can be called multiple times to perform different 
transformations therefore pipelining the values from the previous transformation 
to the next one. This can greatly improve the readability of what is happening to 
a value as it goes through the pipeline. The example below is contrived in that 
you could perform the mapping steps all in one operation, but for the sake of 
demonstration, it's been broken out into multiple <code>Map</code> operations.</p>
<p><code>TryPayForMovies</code> returns a <code>Result&lt;int, InsufficientFundsError&gt;</code> which for our 
purposes means that sometimes the balance is <code>Ok</code> and sometimes, usually 
according to some business or domain logic, it could be an <code>Error</code>. Through 
multiple <code>Map</code> steps, we can convert the number to a string, add a <code>$</code>, then 
add some more formatting for readability through the power of composition. To 
demonstrate various cases, the example uses <code>Enumerable.Range</code> to print 
different results 10 times.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span>
<span class="normal"><a href="#__codelineno-19-16">16</a></span>
<span class="normal"><a href="#__codelineno-19-17">17</a></span>
<span class="normal"><a href="#__codelineno-19-18">18</a></span>
<span class="normal"><a href="#__codelineno-19-19">19</a></span>
<span class="normal"><a href="#__codelineno-19-20">20</a></span>
<span class="normal"><a href="#__codelineno-19-21">21</a></span>
<span class="normal"><a href="#__codelineno-19-22">22</a></span>
<span class="normal"><a href="#__codelineno-19-23">23</a></span>
<span class="normal"><a href="#__codelineno-19-24">24</a></span>
<span class="normal"><a href="#__codelineno-19-25">25</a></span>
<span class="normal"><a href="#__codelineno-19-26">26</a></span>
<span class="normal"><a href="#__codelineno-19-27">27</a></span>
<span class="normal"><a href="#__codelineno-19-28">28</a></span>
<span class="normal"><a href="#__codelineno-19-29">29</a></span>
<span class="normal"><a href="#__codelineno-19-30">30</a></span>
<span class="normal"><a href="#__codelineno-19-31">31</a></span>
<span class="normal"><a href="#__codelineno-19-32">32</a></span>
<span class="normal"><a href="#__codelineno-19-33">33</a></span>
<span class="normal"><a href="#__codelineno-19-34">34</a></span>
<span class="normal"><a href="#__codelineno-19-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">InsufficientFundsError</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="p">{</span>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TryPayForMovies</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
</span><a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="w">        </span><span class="c1">// Let&#39;s assume that movies cost $25</span>
<a id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="nf">Random</span><span class="p">().</span><span class="n">Next</span><span class="p">(</span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="k">switch</span>
<a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-19-16" name="__codelineno-19-16"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-19-17" name="__codelineno-19-17"></a><span class="w">                </span><span class="p">(</span><span class="n">balance</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">25</span><span class="p">)</span>
<a id="__codelineno-19-18" name="__codelineno-19-18"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Ok</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">),</span>
<a id="__codelineno-19-19" name="__codelineno-19-19"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-19-20" name="__codelineno-19-20"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">InsufficientFundsError</span><span class="p">(</span><span class="s">$&quot;Movie Error: balance of ${balance} is too low to pay for movies.&quot;</span><span class="p">)</span>
<a id="__codelineno-19-21" name="__codelineno-19-21"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">)</span>
<a id="__codelineno-19-22" name="__codelineno-19-22"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-19-23" name="__codelineno-19-23"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-19-24" name="__codelineno-19-24"></a><span class="w">        </span><span class="n">Enumerable</span>
<a id="__codelineno-19-25" name="__codelineno-19-25"></a><span class="w">            </span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">)</span>
<a id="__codelineno-19-26" name="__codelineno-19-26"></a><span class="w">            </span><span class="p">.</span><span class="n">ToList</span><span class="p">()</span>
<a id="__codelineno-19-27" name="__codelineno-19-27"></a><span class="w">            </span><span class="p">.</span><span class="n">ForEach</span><span class="p">(</span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-19-28" name="__codelineno-19-28"></a><span class="w">                </span><span class="n">TryPayForMovies</span><span class="p">()</span>
<a id="__codelineno-19-29" name="__codelineno-19-29"></a><span class="hll"><span class="w">                    </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">balance</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">balance</span><span class="p">.</span><span class="n">ToString</span><span class="p">())</span>
</span><a id="__codelineno-19-30" name="__codelineno-19-30"></a><span class="hll"><span class="w">                    </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">strBalance</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">$&quot;${strBalance}&quot;</span><span class="p">)</span>
</span><a id="__codelineno-19-31" name="__codelineno-19-31"></a><span class="hll"><span class="w">                    </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">withDollarSign</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">$&quot;Your balance after paying for the movies: {withDollarSign}&quot;</span><span class="p">)</span>
</span><a id="__codelineno-19-32" name="__codelineno-19-32"></a><span class="hll"><span class="w">                    </span><span class="p">.</span><span class="n">Reduce</span><span class="p">(</span><span class="n">err</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">err</span><span class="p">.</span><span class="n">Message</span><span class="p">)</span>
</span><a id="__codelineno-19-33" name="__codelineno-19-33"></a><span class="w">                    </span><span class="p">.</span><span class="n">Tap</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">)</span>
<a id="__codelineno-19-34" name="__codelineno-19-34"></a><span class="w">                    </span><span class="p">.</span><span class="n">Ignore</span><span class="p">());</span>
<a id="__codelineno-19-35" name="__codelineno-19-35"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="map-errors">Map Errors</h3>
<p>In some cases, it will be necessary to convert one error type to another,
just like when performing a regular mapping function. In this case, reach 
for the <code>MapError</code> method.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span>
<span class="normal"><a href="#__codelineno-20-15">15</a></span>
<span class="normal"><a href="#__codelineno-20-16">16</a></span>
<span class="normal"><a href="#__codelineno-20-17">17</a></span>
<span class="normal"><a href="#__codelineno-20-18">18</a></span>
<span class="normal"><a href="#__codelineno-20-19">19</a></span>
<span class="normal"><a href="#__codelineno-20-20">20</a></span>
<span class="normal"><a href="#__codelineno-20-21">21</a></span>
<span class="normal"><a href="#__codelineno-20-22">22</a></span>
<span class="normal"><a href="#__codelineno-20-23">23</a></span>
<span class="normal"><a href="#__codelineno-20-24">24</a></span>
<span class="normal"><a href="#__codelineno-20-25">25</a></span>
<span class="normal"><a href="#__codelineno-20-26">26</a></span>
<span class="normal"><a href="#__codelineno-20-27">27</a></span>
<span class="normal"><a href="#__codelineno-20-28">28</a></span>
<span class="normal"><a href="#__codelineno-20-29">29</a></span>
<span class="normal"><a href="#__codelineno-20-30">30</a></span>
<span class="normal"><a href="#__codelineno-20-31">31</a></span>
<span class="normal"><a href="#__codelineno-20-32">32</a></span>
<span class="normal"><a href="#__codelineno-20-33">33</a></span>
<span class="normal"><a href="#__codelineno-20-34">34</a></span>
<span class="normal"><a href="#__codelineno-20-35">35</a></span>
<span class="normal"><a href="#__codelineno-20-36">36</a></span>
<span class="normal"><a href="#__codelineno-20-37">37</a></span>
<span class="normal"><a href="#__codelineno-20-38">38</a></span>
<span class="normal"><a href="#__codelineno-20-39">39</a></span>
<span class="normal"><a href="#__codelineno-20-40">40</a></span>
<span class="normal"><a href="#__codelineno-20-41">41</a></span>
<span class="normal"><a href="#__codelineno-20-42">42</a></span>
<span class="normal"><a href="#__codelineno-20-43">43</a></span>
<span class="normal"><a href="#__codelineno-20-44">44</a></span>
<span class="normal"><a href="#__codelineno-20-45">45</a></span>
<span class="normal"><a href="#__codelineno-20-46">46</a></span>
<span class="normal"><a href="#__codelineno-20-47">47</a></span>
<span class="normal"><a href="#__codelineno-20-48">48</a></span>
<span class="normal"><a href="#__codelineno-20-49">49</a></span>
<span class="normal"><a href="#__codelineno-20-50">50</a></span>
<span class="normal"><a href="#__codelineno-20-51">51</a></span>
<span class="normal"><a href="#__codelineno-20-52">52</a></span>
<span class="normal"><a href="#__codelineno-20-53">53</a></span>
<span class="normal"><a href="#__codelineno-20-54">54</a></span>
<span class="normal"><a href="#__codelineno-20-55">55</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">InsufficientFundsError</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a>
<a id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">ApplicationError</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Errors</span><span class="p">);</span>
<a id="__codelineno-20-12" name="__codelineno-20-12"></a>
<a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="p">{</span>
<a id="__codelineno-20-15" name="__codelineno-20-15"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TryPayForMovies</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
</span><a id="__codelineno-20-16" name="__codelineno-20-16"></a><span class="w">        </span><span class="c1">// Let&#39;s assume that movies cost $25</span>
<a id="__codelineno-20-17" name="__codelineno-20-17"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="nf">Random</span><span class="p">().</span><span class="n">Next</span><span class="p">(</span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="k">switch</span>
<a id="__codelineno-20-18" name="__codelineno-20-18"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-20-19" name="__codelineno-20-19"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-20-20" name="__codelineno-20-20"></a><span class="w">                </span><span class="p">(</span><span class="n">balance</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">25</span><span class="p">)</span>
<a id="__codelineno-20-21" name="__codelineno-20-21"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Ok</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">),</span>
<a id="__codelineno-20-22" name="__codelineno-20-22"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-20-23" name="__codelineno-20-23"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">InsufficientFundsError</span><span class="p">(</span><span class="s">$&quot;Movie Error: balance of ${balance} is too low to pay for movies.&quot;</span><span class="p">)</span>
<a id="__codelineno-20-24" name="__codelineno-20-24"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">)</span>
<a id="__codelineno-20-25" name="__codelineno-20-25"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-20-26" name="__codelineno-20-26"></a>
<a id="__codelineno-20-27" name="__codelineno-20-27"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">PrintErrorMessages</span><span class="p">(</span><span class="k">this</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="n">ApplicationError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result</span><span class="p">)</span>
</span><a id="__codelineno-20-28" name="__codelineno-20-28"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-20-29" name="__codelineno-20-29"></a><span class="w">        </span><span class="n">result</span>
<a id="__codelineno-20-30" name="__codelineno-20-30"></a><span class="w">            </span><span class="p">.</span><span class="n">Effect</span><span class="p">(</span>
<a id="__codelineno-20-31" name="__codelineno-20-31"></a><span class="w">                </span><span class="n">ok</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-20-32" name="__codelineno-20-32"></a><span class="w">                </span><span class="n">err</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">err</span><span class="p">.</span><span class="n">Errors</span><span class="p">.</span><span class="n">ForEach</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">)</span>
<a id="__codelineno-20-33" name="__codelineno-20-33"></a><span class="w">            </span><span class="p">);</span>
<a id="__codelineno-20-34" name="__codelineno-20-34"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-35" name="__codelineno-20-35"></a>
<a id="__codelineno-20-36" name="__codelineno-20-36"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">ApplicationError</span><span class="w"> </span><span class="nf">ToApplicationError</span><span class="p">(</span><span class="k">this</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="w"> </span><span class="n">error</span><span class="p">)</span>
</span><a id="__codelineno-20-37" name="__codelineno-20-37"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-20-38" name="__codelineno-20-38"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">errorMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">error</span><span class="p">.</span><span class="n">Message</span><span class="p">;</span>
<a id="__codelineno-20-39" name="__codelineno-20-39"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">errorList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errorMessage</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-20-40" name="__codelineno-20-40"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">ApplicationError</span><span class="p">(</span><span class="n">errorList</span><span class="p">);</span>
<a id="__codelineno-20-41" name="__codelineno-20-41"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-42" name="__codelineno-20-42"></a>
<a id="__codelineno-20-43" name="__codelineno-20-43"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-20-44" name="__codelineno-20-44"></a><span class="w">        </span><span class="n">Enumerable</span>
<a id="__codelineno-20-45" name="__codelineno-20-45"></a><span class="w">            </span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">)</span>
<a id="__codelineno-20-46" name="__codelineno-20-46"></a><span class="w">            </span><span class="p">.</span><span class="n">ToList</span><span class="p">()</span>
<a id="__codelineno-20-47" name="__codelineno-20-47"></a><span class="w">            </span><span class="p">.</span><span class="n">ForEach</span><span class="p">(</span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-20-48" name="__codelineno-20-48"></a><span class="w">                </span><span class="n">TryPayForMovies</span><span class="p">()</span>
<a id="__codelineno-20-49" name="__codelineno-20-49"></a><span class="w">                    </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">balance</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">balance</span><span class="p">.</span><span class="n">ToString</span><span class="p">())</span>
<a id="__codelineno-20-50" name="__codelineno-20-50"></a><span class="w">                    </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">strBalance</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">$&quot;${strBalance}&quot;</span><span class="p">)</span>
<a id="__codelineno-20-51" name="__codelineno-20-51"></a><span class="w">                    </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">withDollarSign</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">$&quot;Your balance after paying for the movies: {withDollarSign}&quot;</span><span class="p">)</span>
<a id="__codelineno-20-52" name="__codelineno-20-52"></a><span class="hll"><span class="w">                    </span><span class="p">.</span><span class="n">MapError</span><span class="p">(</span><span class="n">err</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">err</span><span class="p">.</span><span class="n">ToApplicationError</span><span class="p">())</span>
</span><a id="__codelineno-20-53" name="__codelineno-20-53"></a><span class="w">                    </span><span class="p">.</span><span class="n">Tap</span><span class="p">(</span><span class="n">err</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">err</span><span class="p">.</span><span class="n">PrintErrorMessages</span><span class="p">())</span>
<a id="__codelineno-20-54" name="__codelineno-20-54"></a><span class="w">                    </span><span class="p">.</span><span class="n">Ignore</span><span class="p">());</span>
<a id="__codelineno-20-55" name="__codelineno-20-55"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="result-match">Result Match</h3>
<p>The previous example can be rewritten using <code>Match</code> as well. However, as previously 
noted, <code>Map</code> can be called many times, where <code>Match</code> can only be called once. 
<code>Match</code> should be thought of as a replacement for a single <code>Map</code> and <code>Reduce</code>
operation. This way, if there are many <code>Map</code> operations to perform, it is possible
to do all of them except the last one, then call <code>Match</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-21-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-21-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-21-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-21-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-21-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-21-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-21-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-21-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-21-10">10</a></span>
<span class="normal"><a href="#__codelineno-21-11">11</a></span>
<span class="normal"><a href="#__codelineno-21-12">12</a></span>
<span class="normal"><a href="#__codelineno-21-13">13</a></span>
<span class="normal"><a href="#__codelineno-21-14">14</a></span>
<span class="normal"><a href="#__codelineno-21-15">15</a></span>
<span class="normal"><a href="#__codelineno-21-16">16</a></span>
<span class="normal"><a href="#__codelineno-21-17">17</a></span>
<span class="normal"><a href="#__codelineno-21-18">18</a></span>
<span class="normal"><a href="#__codelineno-21-19">19</a></span>
<span class="normal"><a href="#__codelineno-21-20">20</a></span>
<span class="normal"><a href="#__codelineno-21-21">21</a></span>
<span class="normal"><a href="#__codelineno-21-22">22</a></span>
<span class="normal"><a href="#__codelineno-21-23">23</a></span>
<span class="normal"><a href="#__codelineno-21-24">24</a></span>
<span class="normal"><a href="#__codelineno-21-25">25</a></span>
<span class="normal"><a href="#__codelineno-21-26">26</a></span>
<span class="normal"><a href="#__codelineno-21-27">27</a></span>
<span class="normal"><a href="#__codelineno-21-28">28</a></span>
<span class="normal"><a href="#__codelineno-21-29">29</a></span>
<span class="normal"><a href="#__codelineno-21-30">30</a></span>
<span class="normal"><a href="#__codelineno-21-31">31</a></span>
<span class="normal"><a href="#__codelineno-21-32">32</a></span>
<span class="normal"><a href="#__codelineno-21-33">33</a></span>
<span class="normal"><a href="#__codelineno-21-34">34</a></span>
<span class="normal"><a href="#__codelineno-21-35">35</a></span>
<span class="normal"><a href="#__codelineno-21-36">36</a></span>
<span class="normal"><a href="#__codelineno-21-37">37</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">InsufficientFundsError</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-21-9" name="__codelineno-21-9"></a>
<a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="p">{</span>
<a id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TryPayForMovies</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="w">        </span><span class="c1">// Let&#39;s assume that movies cost $25</span>
<a id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="nf">Random</span><span class="p">().</span><span class="n">Next</span><span class="p">(</span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="k">switch</span>
<a id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-21-16" name="__codelineno-21-16"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-21-17" name="__codelineno-21-17"></a><span class="w">                </span><span class="p">(</span><span class="n">balance</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">25</span><span class="p">)</span>
<a id="__codelineno-21-18" name="__codelineno-21-18"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Ok</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">),</span>
<a id="__codelineno-21-19" name="__codelineno-21-19"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-21-20" name="__codelineno-21-20"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">InsufficientFundsError</span><span class="p">(</span><span class="s">$&quot;Movie Error: balance of ${balance} is too low to pay for movies.&quot;</span><span class="p">)</span>
<a id="__codelineno-21-21" name="__codelineno-21-21"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">)</span>
<a id="__codelineno-21-22" name="__codelineno-21-22"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-21-23" name="__codelineno-21-23"></a>
<a id="__codelineno-21-24" name="__codelineno-21-24"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-21-25" name="__codelineno-21-25"></a><span class="w">        </span><span class="n">Enumerable</span>
<a id="__codelineno-21-26" name="__codelineno-21-26"></a><span class="w">            </span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">)</span>
<a id="__codelineno-21-27" name="__codelineno-21-27"></a><span class="w">            </span><span class="p">.</span><span class="n">ToList</span><span class="p">()</span>
<a id="__codelineno-21-28" name="__codelineno-21-28"></a><span class="w">            </span><span class="p">.</span><span class="n">ForEach</span><span class="p">(</span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-21-29" name="__codelineno-21-29"></a><span class="w">                </span><span class="n">TryPayForMovies</span><span class="p">()</span>
<a id="__codelineno-21-30" name="__codelineno-21-30"></a><span class="hll"><span class="w">                    </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">balance</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">balance</span><span class="p">.</span><span class="n">ToString</span><span class="p">())</span>
</span><a id="__codelineno-21-31" name="__codelineno-21-31"></a><span class="hll"><span class="w">                    </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">strBalance</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">$&quot;${strBalance}&quot;</span><span class="p">)</span>
</span><a id="__codelineno-21-32" name="__codelineno-21-32"></a><span class="hll"><span class="w">                    </span><span class="p">.</span><span class="n">Match</span><span class="p">(</span>
</span><a id="__codelineno-21-33" name="__codelineno-21-33"></a><span class="hll"><span class="w">                        </span><span class="n">withDollarSign</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">$&quot;Your balance after paying for the movies: {withDollarSign}&quot;</span><span class="p">,</span>
</span><a id="__codelineno-21-34" name="__codelineno-21-34"></a><span class="hll"><span class="w">                        </span><span class="n">err</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">err</span><span class="p">.</span><span class="n">Message</span><span class="p">)</span>
</span><a id="__codelineno-21-35" name="__codelineno-21-35"></a><span class="w">                    </span><span class="p">.</span><span class="n">Tap</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">)</span>
<a id="__codelineno-21-36" name="__codelineno-21-36"></a><span class="w">                    </span><span class="p">.</span><span class="n">Ignore</span><span class="p">());</span>
<a id="__codelineno-21-37" name="__codelineno-21-37"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="result-bind">Result Bind</h3>
<p>Just like the <code>Bind</code> method for <code>Option</code>, <code>Result</code> also has a <code>Bind</code> method for 
when a mapping operation produces another <code>Result</code> type. There is a current 
limitation on this method where the binding method must also produce the same 
error type. This usually isn't a problem, but something to be aware of. Much of 
this limitation can be overcome by using Discriminated Unions for an error type. 
This way, a binding method could produce a different error perhaps, but if it's a 
variant of a discriminated union, C# will still see it as the parent discriminated
union type. In the following example, let's say that we wanted to pay for a movie 
and buy dinner. Buying dinner though, depends on whether or not there was money 
left over after paying for the movies.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span>
<span class="normal"><a href="#__codelineno-22-14">14</a></span>
<span class="normal"><a href="#__codelineno-22-15">15</a></span>
<span class="normal"><a href="#__codelineno-22-16">16</a></span>
<span class="normal"><a href="#__codelineno-22-17">17</a></span>
<span class="normal"><a href="#__codelineno-22-18">18</a></span>
<span class="normal"><a href="#__codelineno-22-19">19</a></span>
<span class="normal"><a href="#__codelineno-22-20">20</a></span>
<span class="normal"><a href="#__codelineno-22-21">21</a></span>
<span class="normal"><a href="#__codelineno-22-22">22</a></span>
<span class="normal"><a href="#__codelineno-22-23">23</a></span>
<span class="normal"><a href="#__codelineno-22-24">24</a></span>
<span class="normal"><a href="#__codelineno-22-25">25</a></span>
<span class="normal"><a href="#__codelineno-22-26">26</a></span>
<span class="normal"><a href="#__codelineno-22-27">27</a></span>
<span class="normal"><a href="#__codelineno-22-28">28</a></span>
<span class="normal"><a href="#__codelineno-22-29">29</a></span>
<span class="normal"><a href="#__codelineno-22-30">30</a></span>
<span class="normal"><a href="#__codelineno-22-31">31</a></span>
<span class="normal"><a href="#__codelineno-22-32">32</a></span>
<span class="normal"><a href="#__codelineno-22-33">33</a></span>
<span class="normal"><a href="#__codelineno-22-34">34</a></span>
<span class="normal"><a href="#__codelineno-22-35">35</a></span>
<span class="normal"><a href="#__codelineno-22-36">36</a></span>
<span class="normal"><a href="#__codelineno-22-37">37</a></span>
<span class="normal"><a href="#__codelineno-22-38">38</a></span>
<span class="normal"><a href="#__codelineno-22-39">39</a></span>
<span class="normal"><a href="#__codelineno-22-40">40</a></span>
<span class="normal"><a href="#__codelineno-22-41">41</a></span>
<span class="normal"><a href="#__codelineno-22-42">42</a></span>
<span class="normal"><a href="#__codelineno-22-43">43</a></span>
<span class="normal"><a href="#__codelineno-22-44">44</a></span>
<span class="normal"><a href="#__codelineno-22-45">45</a></span>
<span class="normal"><a href="#__codelineno-22-46">46</a></span>
<span class="normal"><a href="#__codelineno-22-47">47</a></span>
<span class="normal"><a href="#__codelineno-22-48">48</a></span>
<span class="normal"><a href="#__codelineno-22-49">49</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">InsufficientFundsError</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="p">{</span>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TryPayForMovies</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="w">        </span><span class="c1">// Let&#39;s assume that movies cost $25</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="nf">Random</span><span class="p">().</span><span class="n">Next</span><span class="p">(</span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="k">switch</span>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-16" name="__codelineno-22-16"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-22-17" name="__codelineno-22-17"></a><span class="w">                </span><span class="p">(</span><span class="n">balance</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">25</span><span class="p">)</span>
<a id="__codelineno-22-18" name="__codelineno-22-18"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Ok</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">),</span>
<a id="__codelineno-22-19" name="__codelineno-22-19"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-22-20" name="__codelineno-22-20"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">InsufficientFundsError</span><span class="p">(</span><span class="s">$&quot;Movie Error: balance of ${balance} is too low to pay for movies.&quot;</span><span class="p">)</span>
<a id="__codelineno-22-21" name="__codelineno-22-21"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">)</span>
<a id="__codelineno-22-22" name="__codelineno-22-22"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-22-23" name="__codelineno-22-23"></a>
<a id="__codelineno-22-24" name="__codelineno-22-24"></a><span class="hll"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TryBuyDinner</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">balance</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
</span><a id="__codelineno-22-25" name="__codelineno-22-25"></a><span class="w">        </span><span class="c1">// assuming dinner costs $50</span>
<a id="__codelineno-22-26" name="__codelineno-22-26"></a><span class="w">        </span><span class="n">balance</span><span class="w"> </span><span class="k">switch</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-27" name="__codelineno-22-27"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">bal</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">bal</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-22-28" name="__codelineno-22-28"></a><span class="w">                </span><span class="p">(</span><span class="n">balance</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">50</span><span class="p">)</span>
<a id="__codelineno-22-29" name="__codelineno-22-29"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Ok</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">),</span>
<a id="__codelineno-22-30" name="__codelineno-22-30"></a><span class="w">            </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<a id="__codelineno-22-31" name="__codelineno-22-31"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">InsufficientFundsError</span><span class="p">(</span><span class="s">$&quot;Dinner Error: balance of ${balance} was too low to pay for dinner.&quot;</span><span class="p">)</span>
<a id="__codelineno-22-32" name="__codelineno-22-32"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">)</span>
<a id="__codelineno-22-33" name="__codelineno-22-33"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-22-34" name="__codelineno-22-34"></a>
<a id="__codelineno-22-35" name="__codelineno-22-35"></a>
<a id="__codelineno-22-36" name="__codelineno-22-36"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-22-37" name="__codelineno-22-37"></a><span class="w">        </span><span class="n">Enumerable</span>
<a id="__codelineno-22-38" name="__codelineno-22-38"></a><span class="w">            </span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">)</span>
<a id="__codelineno-22-39" name="__codelineno-22-39"></a><span class="w">            </span><span class="p">.</span><span class="n">ToList</span><span class="p">()</span>
<a id="__codelineno-22-40" name="__codelineno-22-40"></a><span class="w">            </span><span class="p">.</span><span class="n">ForEach</span><span class="p">(</span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-22-41" name="__codelineno-22-41"></a><span class="w">                </span><span class="n">TryPayForMovies</span><span class="p">()</span>
<a id="__codelineno-22-42" name="__codelineno-22-42"></a><span class="hll"><span class="w">                    </span><span class="p">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">TryBuyDinner</span><span class="p">)</span>
</span><a id="__codelineno-22-43" name="__codelineno-22-43"></a><span class="w">                    </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">balance</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">balance</span><span class="p">.</span><span class="n">ToString</span><span class="p">())</span>
<a id="__codelineno-22-44" name="__codelineno-22-44"></a><span class="w">                    </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">strBalance</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">$&quot;${strBalance}&quot;</span><span class="p">)</span>
<a id="__codelineno-22-45" name="__codelineno-22-45"></a><span class="w">                    </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">withDollarSign</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">$&quot;Your balance after paying for the movies: {withDollarSign}&quot;</span><span class="p">)</span>
<a id="__codelineno-22-46" name="__codelineno-22-46"></a><span class="w">                    </span><span class="p">.</span><span class="n">Reduce</span><span class="p">(</span><span class="n">err</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">err</span><span class="p">.</span><span class="n">Message</span><span class="p">)</span>
<a id="__codelineno-22-47" name="__codelineno-22-47"></a><span class="w">                    </span><span class="p">.</span><span class="n">Tap</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">)</span>
<a id="__codelineno-22-48" name="__codelineno-22-48"></a><span class="w">                    </span><span class="p">.</span><span class="n">Ignore</span><span class="p">());</span>
<a id="__codelineno-22-49" name="__codelineno-22-49"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="result-effect">Result Effect</h3>
<p>Just like <code>Option</code> and <code>Union</code>, <code>Result</code> also has an <code>Effect</code> method that 
allows us to perform some <code>Action</code> which returns <code>void</code> as a side-effect on 
our <code>Result</code> type. <code>Effect</code> is similar to <code>Match</code>, but instead of returning 
value, both arms return <code>void</code>. We can use <code>Effect</code> in place of the <code>Map</code>, 
<code>Reduce</code>, and <code>Tap</code> methods used in the previous example.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-23-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-23-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-23-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-23-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-23-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-23-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-23-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-23-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-23-10">10</a></span>
<span class="normal"><a href="#__codelineno-23-11">11</a></span>
<span class="normal"><a href="#__codelineno-23-12">12</a></span>
<span class="normal"><a href="#__codelineno-23-13">13</a></span>
<span class="normal"><a href="#__codelineno-23-14">14</a></span>
<span class="normal"><a href="#__codelineno-23-15">15</a></span>
<span class="normal"><a href="#__codelineno-23-16">16</a></span>
<span class="normal"><a href="#__codelineno-23-17">17</a></span>
<span class="normal"><a href="#__codelineno-23-18">18</a></span>
<span class="normal"><a href="#__codelineno-23-19">19</a></span>
<span class="normal"><a href="#__codelineno-23-20">20</a></span>
<span class="normal"><a href="#__codelineno-23-21">21</a></span>
<span class="normal"><a href="#__codelineno-23-22">22</a></span>
<span class="normal"><a href="#__codelineno-23-23">23</a></span>
<span class="normal"><a href="#__codelineno-23-24">24</a></span>
<span class="normal"><a href="#__codelineno-23-25">25</a></span>
<span class="normal"><a href="#__codelineno-23-26">26</a></span>
<span class="normal"><a href="#__codelineno-23-27">27</a></span>
<span class="normal"><a href="#__codelineno-23-28">28</a></span>
<span class="normal"><a href="#__codelineno-23-29">29</a></span>
<span class="normal"><a href="#__codelineno-23-30">30</a></span>
<span class="normal"><a href="#__codelineno-23-31">31</a></span>
<span class="normal"><a href="#__codelineno-23-32">32</a></span>
<span class="normal"><a href="#__codelineno-23-33">33</a></span>
<span class="normal"><a href="#__codelineno-23-34">34</a></span>
<span class="normal"><a href="#__codelineno-23-35">35</a></span>
<span class="normal"><a href="#__codelineno-23-36">36</a></span>
<span class="normal"><a href="#__codelineno-23-37">37</a></span>
<span class="normal"><a href="#__codelineno-23-38">38</a></span>
<span class="normal"><a href="#__codelineno-23-39">39</a></span>
<span class="normal"><a href="#__codelineno-23-40">40</a></span>
<span class="normal"><a href="#__codelineno-23-41">41</a></span>
<span class="normal"><a href="#__codelineno-23-42">42</a></span>
<span class="normal"><a href="#__codelineno-23-43">43</a></span>
<span class="normal"><a href="#__codelineno-23-44">44</a></span>
<span class="normal"><a href="#__codelineno-23-45">45</a></span>
<span class="normal"><a href="#__codelineno-23-46">46</a></span>
<span class="normal"><a href="#__codelineno-23-47">47</a></span>
<span class="normal"><a href="#__codelineno-23-48">48</a></span>
<span class="normal"><a href="#__codelineno-23-49">49</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a>
<a id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">InsufficientFundsError</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-23-9" name="__codelineno-23-9"></a>
<a id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="p">{</span>
<a id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TryPayForMovies</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-23-13" name="__codelineno-23-13"></a><span class="w">        </span><span class="c1">// Let&#39;s assume that movies cost $25</span>
<a id="__codelineno-23-14" name="__codelineno-23-14"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="nf">Random</span><span class="p">().</span><span class="n">Next</span><span class="p">(</span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="k">switch</span>
<a id="__codelineno-23-15" name="__codelineno-23-15"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-23-16" name="__codelineno-23-16"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-23-17" name="__codelineno-23-17"></a><span class="w">                </span><span class="p">(</span><span class="n">balance</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">25</span><span class="p">)</span>
<a id="__codelineno-23-18" name="__codelineno-23-18"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Ok</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">),</span>
<a id="__codelineno-23-19" name="__codelineno-23-19"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-23-20" name="__codelineno-23-20"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">InsufficientFundsError</span><span class="p">(</span><span class="s">$&quot;Movie Error: balance of ${balance} is too low to pay for movies.&quot;</span><span class="p">)</span>
<a id="__codelineno-23-21" name="__codelineno-23-21"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">)</span>
<a id="__codelineno-23-22" name="__codelineno-23-22"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-23-23" name="__codelineno-23-23"></a>
<a id="__codelineno-23-24" name="__codelineno-23-24"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="w"> </span><span class="n">TryBuyDinner</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">balance</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-23-25" name="__codelineno-23-25"></a><span class="w">        </span><span class="c1">// assuming dinner costs $50</span>
<a id="__codelineno-23-26" name="__codelineno-23-26"></a><span class="w">        </span><span class="n">balance</span><span class="w"> </span><span class="k">switch</span>
<a id="__codelineno-23-27" name="__codelineno-23-27"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-23-28" name="__codelineno-23-28"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">bal</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">bal</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-23-29" name="__codelineno-23-29"></a><span class="w">                </span><span class="p">(</span><span class="n">balance</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">50</span><span class="p">)</span>
<a id="__codelineno-23-30" name="__codelineno-23-30"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Ok</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">),</span>
<a id="__codelineno-23-31" name="__codelineno-23-31"></a><span class="w">            </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-23-32" name="__codelineno-23-32"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="nf">InsufficientFundsError</span><span class="p">(</span><span class="s">$&quot;Dinner Error: balance of ${balance} was too low to pay for dinner.&quot;</span><span class="p">)</span>
<a id="__codelineno-23-33" name="__codelineno-23-33"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">InsufficientFundsError</span><span class="o">&gt;</span><span class="p">)</span>
<a id="__codelineno-23-34" name="__codelineno-23-34"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-23-35" name="__codelineno-23-35"></a>
<a id="__codelineno-23-36" name="__codelineno-23-36"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-23-37" name="__codelineno-23-37"></a><span class="w">        </span><span class="n">Enumerable</span>
<a id="__codelineno-23-38" name="__codelineno-23-38"></a><span class="w">            </span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">)</span>
<a id="__codelineno-23-39" name="__codelineno-23-39"></a><span class="w">            </span><span class="p">.</span><span class="n">ToList</span><span class="p">()</span>
<a id="__codelineno-23-40" name="__codelineno-23-40"></a><span class="w">            </span><span class="p">.</span><span class="n">ForEach</span><span class="p">(</span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-23-41" name="__codelineno-23-41"></a><span class="w">                </span><span class="n">TryPayForMovies</span><span class="p">()</span>
<a id="__codelineno-23-42" name="__codelineno-23-42"></a><span class="w">                    </span><span class="p">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">TryBuyDinner</span><span class="p">)</span>
<a id="__codelineno-23-43" name="__codelineno-23-43"></a><span class="w">                    </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">balance</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">balance</span><span class="p">.</span><span class="n">ToString</span><span class="p">())</span>
<a id="__codelineno-23-44" name="__codelineno-23-44"></a><span class="w">                    </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">strBalance</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">$&quot;${strBalance}&quot;</span><span class="p">)</span>
<a id="__codelineno-23-45" name="__codelineno-23-45"></a><span class="hll"><span class="w">                    </span><span class="p">.</span><span class="n">Effect</span><span class="p">(</span>
</span><a id="__codelineno-23-46" name="__codelineno-23-46"></a><span class="hll"><span class="w">                        </span><span class="n">withDollarSign</span><span class="w"> </span><span class="o">=&gt;</span>
</span><a id="__codelineno-23-47" name="__codelineno-23-47"></a><span class="hll"><span class="w">                            </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;Your balance after paying for dinner and the movies: {withDollarSign}&quot;</span><span class="p">),</span>
</span><a id="__codelineno-23-48" name="__codelineno-23-48"></a><span class="hll"><span class="w">                        </span><span class="n">err</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">err</span><span class="p">.</span><span class="n">Message</span><span class="p">)));</span>
</span><a id="__codelineno-23-49" name="__codelineno-23-49"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="result-effectok-and-effecterror">Result EffectOk and EffectError</h3>
<p>Perform an <code>Effect</code> when a <code>Result</code> is <code>Ok</code> or when it is an <code>Error</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-24-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-24-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-24-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-24-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-24-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-24-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-24-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-24-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-24-10">10</a></span>
<span class="normal"><a href="#__codelineno-24-11">11</a></span>
<span class="normal"><a href="#__codelineno-24-12">12</a></span>
<span class="normal"><a href="#__codelineno-24-13">13</a></span>
<span class="normal"><a href="#__codelineno-24-14">14</a></span>
<span class="normal"><a href="#__codelineno-24-15">15</a></span>
<span class="normal"><a href="#__codelineno-24-16">16</a></span>
<span class="normal"><a href="#__codelineno-24-17">17</a></span>
<span class="normal"><a href="#__codelineno-24-18">18</a></span>
<span class="normal"><a href="#__codelineno-24-19">19</a></span>
<span class="normal"><a href="#__codelineno-24-20">20</a></span>
<span class="normal"><a href="#__codelineno-24-21">21</a></span>
<span class="normal"><a href="#__codelineno-24-22">22</a></span>
<span class="normal"><a href="#__codelineno-24-23">23</a></span>
<span class="normal"><a href="#__codelineno-24-24">24</a></span>
<span class="normal"><a href="#__codelineno-24-25">25</a></span>
<span class="normal"><a href="#__codelineno-24-26">26</a></span>
<span class="normal"><a href="#__codelineno-24-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-24-6" name="__codelineno-24-6"></a>
<a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="p">{</span>
<a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="w">        </span><span class="c1">// This will print &quot;value&quot; to the console.</span>
<a id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="w">        </span><span class="n">Ok</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span>
<a id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">EffectOk</span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="k">value</span><span class="p">));</span>
</span><a id="__codelineno-24-14" name="__codelineno-24-14"></a>
<a id="__codelineno-24-15" name="__codelineno-24-15"></a><span class="w">        </span><span class="c1">// This will do nothing since the input value was an Error.</span>
<a id="__codelineno-24-16" name="__codelineno-24-16"></a><span class="w">        </span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Exception</span><span class="p">(</span><span class="s">&quot;Something bad happened&quot;</span><span class="p">))</span>
<a id="__codelineno-24-17" name="__codelineno-24-17"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">EffectOk</span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="k">value</span><span class="p">));</span>
</span><a id="__codelineno-24-18" name="__codelineno-24-18"></a>
<a id="__codelineno-24-19" name="__codelineno-24-19"></a><span class="w">        </span><span class="c1">// This will do nothing since the input value is Ok</span>
<a id="__codelineno-24-20" name="__codelineno-24-20"></a><span class="w">        </span><span class="n">Ok</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span>
<a id="__codelineno-24-21" name="__codelineno-24-21"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">EffectError</span><span class="p">(</span><span class="n">exception</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">exception</span><span class="p">.</span><span class="n">Message</span><span class="p">));</span>
</span><a id="__codelineno-24-22" name="__codelineno-24-22"></a>
<a id="__codelineno-24-23" name="__codelineno-24-23"></a><span class="w">        </span><span class="c1">// This will print &quot;Something bad happened&quot; since it was an error.</span>
<a id="__codelineno-24-24" name="__codelineno-24-24"></a><span class="w">        </span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Exception</span><span class="p">(</span><span class="s">&quot;Something bad happened&quot;</span><span class="p">))</span>
<a id="__codelineno-24-25" name="__codelineno-24-25"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">EffectError</span><span class="p">(</span><span class="n">exception</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">exception</span><span class="p">.</span><span class="n">Message</span><span class="p">));</span>
</span><a id="__codelineno-24-26" name="__codelineno-24-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-24-27" name="__codelineno-24-27"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="result-tap-tapok-and-taperror">Result Tap, TapOk, and TapError</h3>
<p>If we want to <code>Tap</code> into the <code>Result</code> and perform some effect without consuming the value, we can use <code>Tap</code>, <code>TapOk</code>, and <code>TapError</code>. With <code>Tap</code>, some kind of action must be provided for both the <code>Ok</code> and <code>Error</code> cases.</p>
<p>For <code>TapOk</code> and <code>TapError</code>, one or more actions can be provided to occur when the <code>Result</code> meets that criteria. This will allow us to only perform actions when the value is <code>Ok</code> or <code>Error</code> for instance.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-25-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-25-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-25-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-25-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-25-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-25-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-25-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-25-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-25-10">10</a></span>
<span class="normal"><a href="#__codelineno-25-11">11</a></span>
<span class="normal"><a href="#__codelineno-25-12">12</a></span>
<span class="normal"><a href="#__codelineno-25-13">13</a></span>
<span class="normal"><a href="#__codelineno-25-14">14</a></span>
<span class="normal"><a href="#__codelineno-25-15">15</a></span>
<span class="normal"><a href="#__codelineno-25-16">16</a></span>
<span class="normal"><a href="#__codelineno-25-17">17</a></span>
<span class="normal"><a href="#__codelineno-25-18">18</a></span>
<span class="normal"><a href="#__codelineno-25-19">19</a></span>
<span class="normal"><a href="#__codelineno-25-20">20</a></span>
<span class="normal"><a href="#__codelineno-25-21">21</a></span>
<span class="normal"><a href="#__codelineno-25-22">22</a></span>
<span class="normal"><a href="#__codelineno-25-23">23</a></span>
<span class="normal"><a href="#__codelineno-25-24">24</a></span>
<span class="normal"><a href="#__codelineno-25-25">25</a></span>
<span class="normal"><a href="#__codelineno-25-26">26</a></span>
<span class="normal"><a href="#__codelineno-25-27">27</a></span>
<span class="normal"><a href="#__codelineno-25-28">28</a></span>
<span class="normal"><a href="#__codelineno-25-29">29</a></span>
<span class="normal"><a href="#__codelineno-25-30">30</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-25-6" name="__codelineno-25-6"></a>
<a id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="p">{</span>
<a id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-25-10" name="__codelineno-25-10"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-25-11" name="__codelineno-25-11"></a><span class="w">        </span><span class="c1">// Actions can be performed when ok and error.</span>
<a id="__codelineno-25-12" name="__codelineno-25-12"></a><span class="w">        </span><span class="n">Ok</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span>
<a id="__codelineno-25-13" name="__codelineno-25-13"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Tap</span><span class="p">(</span><span class="n">ok</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">ok</span><span class="p">),</span><span class="w"> </span><span class="n">exception</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">exception</span><span class="p">.</span><span class="n">Message</span><span class="p">))</span>
</span><a id="__codelineno-25-14" name="__codelineno-25-14"></a><span class="w">            </span><span class="c1">// The Result is not consumed so we can still use it afterwards.</span>
<a id="__codelineno-25-15" name="__codelineno-25-15"></a><span class="w">            </span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">ok</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">ok</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;!&quot;</span><span class="p">);</span>
<a id="__codelineno-25-16" name="__codelineno-25-16"></a>
<a id="__codelineno-25-17" name="__codelineno-25-17"></a><span class="w">        </span><span class="c1">// We can do multiple things when the value is Ok with a TapOk.</span>
<a id="__codelineno-25-18" name="__codelineno-25-18"></a><span class="w">        </span><span class="kt">string?</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<a id="__codelineno-25-19" name="__codelineno-25-19"></a><span class="w">        </span><span class="n">Ok</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span>
<a id="__codelineno-25-20" name="__codelineno-25-20"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">TapOk</span><span class="p">(</span>
</span><a id="__codelineno-25-21" name="__codelineno-25-21"></a><span class="hll"><span class="w">                </span><span class="k">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="k">value</span><span class="p">),</span>
</span><a id="__codelineno-25-22" name="__codelineno-25-22"></a><span class="hll"><span class="w">                </span><span class="k">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="p">);</span>
</span><a id="__codelineno-25-23" name="__codelineno-25-23"></a>
<a id="__codelineno-25-24" name="__codelineno-25-24"></a><span class="w">        </span><span class="c1">// Nothing happens here since the value is an error.</span>
<a id="__codelineno-25-25" name="__codelineno-25-25"></a><span class="w">        </span><span class="c1">// Error&lt;T&gt; creates a Result&lt;T, Exception&gt; by accepting a string or an Exception.</span>
<a id="__codelineno-25-26" name="__codelineno-25-26"></a><span class="w">        </span><span class="c1">// The value &quot;Error!&quot; is used as the exception message.</span>
<a id="__codelineno-25-27" name="__codelineno-25-27"></a><span class="w">        </span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;Error!&quot;</span><span class="p">)</span>
<a id="__codelineno-25-28" name="__codelineno-25-28"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">TapOk</span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="k">value</span><span class="p">));</span>
</span><a id="__codelineno-25-29" name="__codelineno-25-29"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-25-30" name="__codelineno-25-30"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="result-unwrap-and-unwraperror">Result Unwrap and UnwrapError</h3>
<p>If we need to get the value out of a <code>Result</code> for some reason and it's impractical to use <code>Match</code>, <code>Map</code>, <code>Tap</code>, or <code>Effect</code>, we can <code>Unwrap</code> or <code>UnwrapError</code> in order to get its inner contents.
It's vital to check to see if the <code>Result</code> is <code>Ok</code> before using <code>Unwrap</code> and see if it's <code>Error</code> before using <code>UnwrapError</code>, otherwise it will throw an exception!</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span>
<span class="normal"><a href="#__codelineno-26-13">13</a></span>
<span class="normal"><a href="#__codelineno-26-14">14</a></span>
<span class="normal"><a href="#__codelineno-26-15">15</a></span>
<span class="normal"><a href="#__codelineno-26-16">16</a></span>
<span class="normal"><a href="#__codelineno-26-17">17</a></span>
<span class="normal"><a href="#__codelineno-26-18">18</a></span>
<span class="normal"><a href="#__codelineno-26-19">19</a></span>
<span class="normal"><a href="#__codelineno-26-20">20</a></span>
<span class="normal"><a href="#__codelineno-26-21">21</a></span>
<span class="normal"><a href="#__codelineno-26-22">22</a></span>
<span class="normal"><a href="#__codelineno-26-23">23</a></span>
<span class="normal"><a href="#__codelineno-26-24">24</a></span>
<span class="normal"><a href="#__codelineno-26-25">25</a></span>
<span class="normal"><a href="#__codelineno-26-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="p">{</span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="w">        </span><span class="c1">// This will unwrap fine because the value is Ok.</span>
<a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="hll"><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ok</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">).</span><span class="n">Unwrap</span><span class="p">();</span>
</span><a id="__codelineno-26-11" name="__codelineno-26-11"></a>
<a id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="w">        </span><span class="c1">// This will throw an exception because the value is an error.</span>
<a id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="hll"><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">never</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;Error!&quot;</span><span class="p">).</span><span class="n">Unwrap</span><span class="p">();</span>
</span><a id="__codelineno-26-14" name="__codelineno-26-14"></a>
<a id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="w">        </span><span class="c1">// To do this safely, we need to always check the Option first!</span>
<a id="__codelineno-26-16" name="__codelineno-26-16"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;Error!&quot;</span><span class="p">);</span>
<a id="__codelineno-26-17" name="__codelineno-26-17"></a><span class="hll"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">IsOk</span><span class="p">)</span>
</span><a id="__codelineno-26-18" name="__codelineno-26-18"></a><span class="hll"><span class="w">        </span><span class="p">{</span>
</span><a id="__codelineno-26-19" name="__codelineno-26-19"></a><span class="hll"><span class="w">            </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Unwrap</span><span class="p">();</span>
</span><a id="__codelineno-26-20" name="__codelineno-26-20"></a><span class="hll"><span class="w">        </span><span class="p">}</span>
</span><a id="__codelineno-26-21" name="__codelineno-26-21"></a><span class="hll"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">IsError</span><span class="p">)</span>
</span><a id="__codelineno-26-22" name="__codelineno-26-22"></a><span class="hll"><span class="w">        </span><span class="p">{</span>
</span><a id="__codelineno-26-23" name="__codelineno-26-23"></a><span class="hll"><span class="w">            </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">UnwrapError</span><span class="p">().</span><span class="n">Message</span><span class="p">;</span>
</span><a id="__codelineno-26-24" name="__codelineno-26-24"></a><span class="hll"><span class="w">        </span><span class="p">}</span>
</span><a id="__codelineno-26-25" name="__codelineno-26-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-26-26" name="__codelineno-26-26"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="async-results">Async Results</h3>
<p>Asynchronous support is also provided in this library for <code>Result</code>.</p>
<p>Included async methods:</p>
<ul>
<li><code>MapAsync</code></li>
<li><code>ReduceAsync</code></li>
<li><code>MatchAsync</code></li>
<li><code>BindAsync</code></li>
<li><code>EffectAsync</code></li>
<li><code>EffectOkAsync</code></li>
<li><code>EffectErrorAsync</code></li>
<li><code>TapAsync</code></li>
<li><code>TapOkAsync</code></li>
<li><code>TapErrorAsync</code></li>
<li><code>UnwrapAsync</code></li>
<li><code>UnwrapErrorAsync</code></li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-27-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-27-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-27-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-27-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-27-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-27-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-27-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-27-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-27-10">10</a></span>
<span class="normal"><a href="#__codelineno-27-11">11</a></span>
<span class="normal"><a href="#__codelineno-27-12">12</a></span>
<span class="normal"><a href="#__codelineno-27-13">13</a></span>
<span class="normal"><a href="#__codelineno-27-14">14</a></span>
<span class="normal"><a href="#__codelineno-27-15">15</a></span>
<span class="normal"><a href="#__codelineno-27-16">16</a></span>
<span class="normal"><a href="#__codelineno-27-17">17</a></span>
<span class="normal"><a href="#__codelineno-27-18">18</a></span>
<span class="normal"><a href="#__codelineno-27-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-27-7" name="__codelineno-27-7"></a>
<a id="__codelineno-27-8" name="__codelineno-27-8"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">CustomError</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-27-9" name="__codelineno-27-9"></a>
<a id="__codelineno-27-10" name="__codelineno-27-10"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-27-11" name="__codelineno-27-11"></a><span class="p">{</span>
<a id="__codelineno-27-12" name="__codelineno-27-12"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-27-13" name="__codelineno-27-13"></a><span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="n">Ok</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="n">CustomError</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;Ok&quot;</span><span class="p">)</span>
<a id="__codelineno-27-14" name="__codelineno-27-14"></a><span class="w">            </span><span class="p">.</span><span class="n">Async</span><span class="p">()</span>
<a id="__codelineno-27-15" name="__codelineno-27-15"></a><span class="w">            </span><span class="p">.</span><span class="n">MapAsync</span><span class="p">(</span><span class="n">ok</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">ok</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;!&quot;</span><span class="p">)</span>
<a id="__codelineno-27-16" name="__codelineno-27-16"></a><span class="w">            </span><span class="p">.</span><span class="n">EffectAsync</span><span class="p">(</span>
<a id="__codelineno-27-17" name="__codelineno-27-17"></a><span class="w">                </span><span class="n">ok</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">ok</span><span class="p">),</span>
<a id="__codelineno-27-18" name="__codelineno-27-18"></a><span class="w">                </span><span class="n">err</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">err</span><span class="p">.</span><span class="n">Message</span><span class="p">));</span>
<a id="__codelineno-27-19" name="__codelineno-27-19"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="common-extensions">Common Extensions</h2>
<p>Throughout these examples, there have been a few extension methods that have 
made functional programming easier to work with in C#. Let's talk about a few 
of those in detail now.</p>
<h3 id="pipe">Pipe</h3>
<p><code>Pipe</code> is a general-purpose mapping function that works with any type. Due to 
limitations and naming conflicts in C#, using <code>Map</code> again for this purpose 
was not possible. Because of this, I chose to use the name <code>Pipe</code> to match the
F# <code>|&gt;</code> pipe operator. Pipe allows us to take the results of a previous function, 
transformation, or other expression and then perform additional transformations
on it. Here is a simple example demonstrating its use. There is also a 
<code>PipeAsync</code> method for async processing as well.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span>
<span class="normal"><a href="#__codelineno-28-11">11</a></span>
<span class="normal"><a href="#__codelineno-28-12">12</a></span>
<span class="normal"><a href="#__codelineno-28-13">13</a></span>
<span class="normal"><a href="#__codelineno-28-14">14</a></span>
<span class="normal"><a href="#__codelineno-28-15">15</a></span>
<span class="normal"><a href="#__codelineno-28-16">16</a></span>
<span class="normal"><a href="#__codelineno-28-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">CustomError</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="p">{</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">OneMillion</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="m">1</span><span class="n">_000_000</span><span class="p">;</span>
<a id="__codelineno-28-11" name="__codelineno-28-11"></a>
<a id="__codelineno-28-12" name="__codelineno-28-12"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-28-13" name="__codelineno-28-13"></a><span class="w">        </span><span class="n">OneMillion</span>
<a id="__codelineno-28-14" name="__codelineno-28-14"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">money</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">string</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="s">&quot;{0:C}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">money</span><span class="p">))</span>
</span><a id="__codelineno-28-15" name="__codelineno-28-15"></a><span class="w">            </span><span class="p">.</span><span class="n">Tap</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">)</span>
<a id="__codelineno-28-16" name="__codelineno-28-16"></a><span class="w">            </span><span class="p">.</span><span class="n">Ignore</span><span class="p">();</span>
<a id="__codelineno-28-17" name="__codelineno-28-17"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="tap">Tap</h3>
<p>In the previous example, we used the <code>Tap</code> method to perform a side-effect 
the output of the <code>Pipe</code> method. The way that <code>Tap</code> works, is that it will 
perform operations on the output of the previous value, and then return that 
value as its output. For immutable types, the output will be unchanged. However,
be warned that if the action performed in the <code>Tap</code> method mutates the input, 
then the output will also have mutated values. Below is an example with a mutable 
property to demonstrate this behavior. There is also a <code>TapAsync</code> method for 
async processing as well.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span>
<span class="normal"><a href="#__codelineno-29-11">11</a></span>
<span class="normal"><a href="#__codelineno-29-12">12</a></span>
<span class="normal"><a href="#__codelineno-29-13">13</a></span>
<span class="normal"><a href="#__codelineno-29-14">14</a></span>
<span class="normal"><a href="#__codelineno-29-15">15</a></span>
<span class="normal"><a href="#__codelineno-29-16">16</a></span>
<span class="normal"><a href="#__codelineno-29-17">17</a></span>
<span class="normal"><a href="#__codelineno-29-18">18</a></span>
<span class="normal"><a href="#__codelineno-29-19">19</a></span>
<span class="normal"><a href="#__codelineno-29-20">20</a></span>
<span class="normal"><a href="#__codelineno-29-21">21</a></span>
<span class="normal"><a href="#__codelineno-29-22">22</a></span>
<span class="normal"><a href="#__codelineno-29-23">23</a></span>
<span class="normal"><a href="#__codelineno-29-24">24</a></span>
<span class="normal"><a href="#__codelineno-29-25">25</a></span>
<span class="normal"><a href="#__codelineno-29-26">26</a></span>
<span class="normal"><a href="#__codelineno-29-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">IntClass</span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="p">{</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Value</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="p">}</span>
<a id="__codelineno-29-10" name="__codelineno-29-10"></a>
<a id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="p">{</span>
<a id="__codelineno-29-13" name="__codelineno-29-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">OneMillion</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="m">1</span><span class="n">_000_000</span><span class="p">;</span>
<a id="__codelineno-29-14" name="__codelineno-29-14"></a>
<a id="__codelineno-29-15" name="__codelineno-29-15"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-29-16" name="__codelineno-29-16"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-29-17" name="__codelineno-29-17"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">classValue</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-29-18" name="__codelineno-29-18"></a><span class="w">            </span><span class="n">OneMillion</span>
<a id="__codelineno-29-19" name="__codelineno-29-19"></a><span class="w">                </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">number</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IntClass</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="p">})</span>
<a id="__codelineno-29-20" name="__codelineno-29-20"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">Tap</span><span class="p">(</span><span class="n">intClass</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">intClass</span><span class="p">.</span><span class="n">Value</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
</span><a id="__codelineno-29-21" name="__codelineno-29-21"></a><span class="w">                </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">intClass</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">intClass</span><span class="p">.</span><span class="n">Value</span><span class="p">);</span>
<a id="__codelineno-29-22" name="__codelineno-29-22"></a>
<a id="__codelineno-29-23" name="__codelineno-29-23"></a><span class="w">        </span><span class="c1">// Prints &quot;1000001&quot; because the class value was mutated.</span>
<a id="__codelineno-29-24" name="__codelineno-29-24"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">classValue</span><span class="p">);</span>
<a id="__codelineno-29-25" name="__codelineno-29-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-29-26" name="__codelineno-29-26"></a>
<a id="__codelineno-29-27" name="__codelineno-29-27"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><code>Tap</code> allows multiple actions to provided so that many things can be done to 
the input at once. Here is an example demonstrating adding 1 and then printing
the results before saving the value in a variable.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span>
<span class="normal"><a href="#__codelineno-30-12">12</a></span>
<span class="normal"><a href="#__codelineno-30-13">13</a></span>
<span class="normal"><a href="#__codelineno-30-14">14</a></span>
<span class="normal"><a href="#__codelineno-30-15">15</a></span>
<span class="normal"><a href="#__codelineno-30-16">16</a></span>
<span class="normal"><a href="#__codelineno-30-17">17</a></span>
<span class="normal"><a href="#__codelineno-30-18">18</a></span>
<span class="normal"><a href="#__codelineno-30-19">19</a></span>
<span class="normal"><a href="#__codelineno-30-20">20</a></span>
<span class="normal"><a href="#__codelineno-30-21">21</a></span>
<span class="normal"><a href="#__codelineno-30-22">22</a></span>
<span class="normal"><a href="#__codelineno-30-23">23</a></span>
<span class="normal"><a href="#__codelineno-30-24">24</a></span>
<span class="normal"><a href="#__codelineno-30-25">25</a></span>
<span class="normal"><a href="#__codelineno-30-26">26</a></span>
<span class="normal"><a href="#__codelineno-30-27">27</a></span>
<span class="normal"><a href="#__codelineno-30-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">IntClass</span>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="p">{</span>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Value</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="p">}</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a>
<a id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-30-12" name="__codelineno-30-12"></a><span class="p">{</span>
<a id="__codelineno-30-13" name="__codelineno-30-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">OneMillion</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="m">1</span><span class="n">_000_000</span><span class="p">;</span>
<a id="__codelineno-30-14" name="__codelineno-30-14"></a>
<a id="__codelineno-30-15" name="__codelineno-30-15"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-30-16" name="__codelineno-30-16"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-30-17" name="__codelineno-30-17"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">classValue</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-30-18" name="__codelineno-30-18"></a><span class="w">            </span><span class="n">OneMillion</span>
<a id="__codelineno-30-19" name="__codelineno-30-19"></a><span class="w">                </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">number</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IntClass</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="p">})</span>
<a id="__codelineno-30-20" name="__codelineno-30-20"></a><span class="hll"><span class="w">                </span><span class="p">.</span><span class="n">Tap</span><span class="p">(</span>
</span><a id="__codelineno-30-21" name="__codelineno-30-21"></a><span class="hll"><span class="w">                    </span><span class="n">intClass</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">intClass</span><span class="p">.</span><span class="n">Value</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span>
</span><a id="__codelineno-30-22" name="__codelineno-30-22"></a><span class="hll"><span class="w">                    </span><span class="n">intClass</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;Printed In Tap: {intClass.Value}&quot;</span><span class="p">))</span>
</span><a id="__codelineno-30-23" name="__codelineno-30-23"></a><span class="w">                </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">intClass</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">intClass</span><span class="p">.</span><span class="n">Value</span><span class="p">);</span>
<a id="__codelineno-30-24" name="__codelineno-30-24"></a>
<a id="__codelineno-30-25" name="__codelineno-30-25"></a><span class="w">        </span><span class="c1">// Prints &quot;1000001&quot; because the class value was mutated.</span>
<a id="__codelineno-30-26" name="__codelineno-30-26"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;Printed at the end: {classValue}&quot;</span><span class="p">);</span>
<a id="__codelineno-30-27" name="__codelineno-30-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-28" name="__codelineno-30-28"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="effect">Effect</h3>
<p><code>Effect</code> is like a <code>Pipe</code> that consumes the input, performs some series 
of actions, and returns <code>Unit</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-31-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-31-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-31-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-31-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-31-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-31-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-31-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-31-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-31-10">10</a></span>
<span class="normal"><a href="#__codelineno-31-11">11</a></span>
<span class="normal"><a href="#__codelineno-31-12">12</a></span>
<span class="normal"><a href="#__codelineno-31-13">13</a></span>
<span class="normal"><a href="#__codelineno-31-14">14</a></span>
<span class="normal"><a href="#__codelineno-31-15">15</a></span>
<span class="normal"><a href="#__codelineno-31-16">16</a></span>
<span class="normal"><a href="#__codelineno-31-17">17</a></span>
<span class="normal"><a href="#__codelineno-31-18">18</a></span>
<span class="normal"><a href="#__codelineno-31-19">19</a></span>
<span class="normal"><a href="#__codelineno-31-20">20</a></span>
<span class="normal"><a href="#__codelineno-31-21">21</a></span>
<span class="normal"><a href="#__codelineno-31-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-31-6" name="__codelineno-31-6"></a>
<a id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-31-8" name="__codelineno-31-8"></a>
<a id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-31-10" name="__codelineno-31-10"></a><span class="p">{</span>
<a id="__codelineno-31-11" name="__codelineno-31-11"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-31-12" name="__codelineno-31-12"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-31-13" name="__codelineno-31-13"></a><span class="w">        </span><span class="s">&quot;Some Random Value&quot;</span>
<a id="__codelineno-31-14" name="__codelineno-31-14"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Effect</span><span class="p">(</span><span class="n">input</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">input</span><span class="p">));</span>
</span><a id="__codelineno-31-15" name="__codelineno-31-15"></a>
<a id="__codelineno-31-16" name="__codelineno-31-16"></a><span class="hll"><span class="w">        </span><span class="n">Effect</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;another way.&quot;</span><span class="p">))</span>
</span><a id="__codelineno-31-17" name="__codelineno-31-17"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">unit</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;It&#39;s a unit type!&quot;</span><span class="p">);</span>
</span><a id="__codelineno-31-18" name="__codelineno-31-18"></a>
<a id="__codelineno-31-19" name="__codelineno-31-19"></a><span class="hll"><span class="w">        </span><span class="n">EffectAsync</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;This one returns a Task&lt;Unit&gt;!&quot;</span><span class="p">))</span>
</span><a id="__codelineno-31-20" name="__codelineno-31-20"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">PipeAsync</span><span class="p">(</span><span class="n">unit</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;It&#39;s another unit!&quot;</span><span class="p">);</span>
</span><a id="__codelineno-31-21" name="__codelineno-31-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-31-22" name="__codelineno-31-22"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="cons">Cons</h3>
<p><code>Cons</code> generates an <code>ImmutableList</code> of any type that you put in it. In .NET
8 and C# 12, Collection Expressions and Collection Literals help reduce the 
need for this, but it can still be useful in older versions. See example 
below for usage.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span>
<span class="normal"><a href="#__codelineno-32-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Common</span><span class="p">.</span><span class="n">CommonExtensions</span><span class="p">;</span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a>
<a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="p">{</span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="hll"><span class="w">        </span><span class="n">Cons</span><span class="p">(</span><span class="s">&quot;some&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;things&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;to&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;print&quot;</span><span class="p">)</span>
</span><a id="__codelineno-32-11" name="__codelineno-32-11"></a><span class="w">            </span><span class="p">.</span><span class="n">ForEach</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">);</span>
<a id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-32-13" name="__codelineno-32-13"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="ignore">Ignore</h3>
<p><code>Ignore</code> and <code>IgnoreAsync</code> are used to ignore the output of a function. In languages like F#, any unused values must be explicitly ignored. In C#, this isn't required. To indicate that a calculated result is ignored, you can add this to the end of the function. <code>Ignore</code> produces <code>void</code> and <code>IgnoreAsync</code> produces a <code>Task</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-33-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-33-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-33-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-33-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-33-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-33-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-33-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-33-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-33-10">10</a></span>
<span class="normal"><a href="#__codelineno-33-11">11</a></span>
<span class="normal"><a href="#__codelineno-33-12">12</a></span>
<span class="normal"><a href="#__codelineno-33-13">13</a></span>
<span class="normal"><a href="#__codelineno-33-14">14</a></span>
<span class="normal"><a href="#__codelineno-33-15">15</a></span>
<span class="normal"><a href="#__codelineno-33-16">16</a></span>
<span class="normal"><a href="#__codelineno-33-17">17</a></span>
<span class="normal"><a href="#__codelineno-33-18">18</a></span>
<span class="normal"><a href="#__codelineno-33-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Common</span><span class="p">.</span><span class="n">CommonExtensions</span><span class="p">;</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a>
<a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="p">{</span>
<a id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="w">        </span><span class="s">&quot;Some Contents&quot;</span>
<a id="__codelineno-33-11" name="__codelineno-33-11"></a><span class="w">            </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">str</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;!&quot;</span><span class="p">)</span>
<a id="__codelineno-33-12" name="__codelineno-33-12"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Ignore</span><span class="p">();</span>
</span><a id="__codelineno-33-13" name="__codelineno-33-13"></a>
<a id="__codelineno-33-14" name="__codelineno-33-14"></a><span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="s">&quot;Some Async Contents&quot;</span>
<a id="__codelineno-33-15" name="__codelineno-33-15"></a><span class="w">            </span><span class="p">.</span><span class="n">Async</span><span class="p">()</span>
<a id="__codelineno-33-16" name="__codelineno-33-16"></a><span class="w">            </span><span class="p">.</span><span class="n">PipeAsync</span><span class="p">(</span><span class="n">str</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;!&quot;</span><span class="p">)</span>
<a id="__codelineno-33-17" name="__codelineno-33-17"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">IgnoreAsync</span><span class="p">();</span>
</span><a id="__codelineno-33-18" name="__codelineno-33-18"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-19" name="__codelineno-33-19"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="exception-handling">Exception Handling</h2>
<p>When interacting with code that can throw Exceptions, we normally reach for the 
traditional <code>Try/Catch/Finally</code> block. CSharp.Made.Functional includes a few 
methods to deal with exceptions in a more fluent style.</p>
<h3 id="try">Try</h3>
<p>Use <code>Try</code> to perform an operation which could throw an Exception. There are two 
variants to this method. First, it can be used as a plain static method 
which expects some function to be performed that returns some kind of value. 
There is also an extension method that allows a previous value to be used as 
input to <code>Try</code> which is shown in a later example. The return type of these 
methods is <code>Result&lt;TResult, Exception&gt;</code> where <code>TResult</code> is the type that the 
operation returns. Since there are already a lot of useful methods available 
on <code>Result</code>, it makes working with basic <code>Try/Catch</code> work simpler. 
CSharp.Made.Functional does not provide any mechanisms for a <code>Finally</code> 
block and it's recommended to use the standard <code>Try/Catch/Finally</code> approach in 
those cases. Since overly broad Exception catching is not a best practice, 
it is recommended to use a <code>Switch Expression</code> when matching on the <code>Result</code> 
to handle specific exceptions that are expected for this operation.</p>
<p>In the example below, since we think it could throw, we want to use 
the <code>Result</code> type to help us determine if it was <code>Ok</code> or an <code>Error</code>. We can
make decisions in the <code>Catch</code> handler as to whether or not we want to return 
an <code>Error</code> or we can also throw if it truly is a catastrophic exception.</p>
<p>Like all of the other methods in this library, there are also async methods 
which work the same way.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-34-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-34-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-34-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-34-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-34-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-34-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-34-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-34-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-34-10">10</a></span>
<span class="normal"><a href="#__codelineno-34-11">11</a></span>
<span class="normal"><a href="#__codelineno-34-12">12</a></span>
<span class="normal"><a href="#__codelineno-34-13">13</a></span>
<span class="normal"><a href="#__codelineno-34-14">14</a></span>
<span class="normal"><a href="#__codelineno-34-15">15</a></span>
<span class="normal"><a href="#__codelineno-34-16">16</a></span>
<span class="normal"><a href="#__codelineno-34-17">17</a></span>
<span class="normal"><a href="#__codelineno-34-18">18</a></span>
<span class="normal"><a href="#__codelineno-34-19">19</a></span>
<span class="normal"><a href="#__codelineno-34-20">20</a></span>
<span class="normal"><a href="#__codelineno-34-21">21</a></span>
<span class="normal"><a href="#__codelineno-34-22">22</a></span>
<span class="normal"><a href="#__codelineno-34-23">23</a></span>
<span class="normal"><a href="#__codelineno-34-24">24</a></span>
<span class="normal"><a href="#__codelineno-34-25">25</a></span>
<span class="normal"><a href="#__codelineno-34-26">26</a></span>
<span class="normal"><a href="#__codelineno-34-27">27</a></span>
<span class="normal"><a href="#__codelineno-34-28">28</a></span>
<span class="normal"><a href="#__codelineno-34-29">29</a></span>
<span class="normal"><a href="#__codelineno-34-30">30</a></span>
<span class="normal"><a href="#__codelineno-34-31">31</a></span>
<span class="normal"><a href="#__codelineno-34-32">32</a></span>
<span class="normal"><a href="#__codelineno-34-33">33</a></span>
<span class="normal"><a href="#__codelineno-34-34">34</a></span>
<span class="normal"><a href="#__codelineno-34-35">35</a></span>
<span class="normal"><a href="#__codelineno-34-36">36</a></span>
<span class="normal"><a href="#__codelineno-34-37">37</a></span>
<span class="normal"><a href="#__codelineno-34-38">38</a></span>
<span class="normal"><a href="#__codelineno-34-39">39</a></span>
<span class="normal"><a href="#__codelineno-34-40">40</a></span>
<span class="normal"><a href="#__codelineno-34-41">41</a></span>
<span class="normal"><a href="#__codelineno-34-42">42</a></span>
<span class="normal"><a href="#__codelineno-34-43">43</a></span>
<span class="normal"><a href="#__codelineno-34-44">44</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-34-6" name="__codelineno-34-6"></a>
<a id="__codelineno-34-7" name="__codelineno-34-7"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">CustomError</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-34-8" name="__codelineno-34-8"></a>
<a id="__codelineno-34-9" name="__codelineno-34-9"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-34-10" name="__codelineno-34-10"></a><span class="p">{</span>
<a id="__codelineno-34-11" name="__codelineno-34-11"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">ItMightThrow</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-34-12" name="__codelineno-34-12"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="nf">Random</span><span class="p">().</span><span class="n">Next</span><span class="p">(</span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="k">switch</span>
<a id="__codelineno-34-13" name="__codelineno-34-13"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-34-14" name="__codelineno-34-14"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">value</span><span class="p">,</span>
<a id="__codelineno-34-15" name="__codelineno-34-15"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Exception</span><span class="p">(</span><span class="s">$&quot;Value was {value}&quot;</span><span class="p">)</span>
<a id="__codelineno-34-16" name="__codelineno-34-16"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-34-17" name="__codelineno-34-17"></a>
<a id="__codelineno-34-18" name="__codelineno-34-18"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<a id="__codelineno-34-19" name="__codelineno-34-19"></a><span class="hll"><span class="w">        </span><span class="n">Try</span><span class="p">(</span><span class="n">ItMightThrow</span><span class="p">)</span>
</span><a id="__codelineno-34-20" name="__codelineno-34-20"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Match</span><span class="p">(</span>
</span><a id="__codelineno-34-21" name="__codelineno-34-21"></a><span class="w">                </span><span class="n">ok</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">ok</span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Result</span><span class="p">.</span><span class="n">Ok</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">CustomError</span><span class="o">&gt;</span><span class="p">),</span>
<a id="__codelineno-34-22" name="__codelineno-34-22"></a><span class="w">                </span><span class="n">exception</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-34-23" name="__codelineno-34-23"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-34-24" name="__codelineno-34-24"></a><span class="w">                    </span><span class="c1">// Example logging.</span>
<a id="__codelineno-34-25" name="__codelineno-34-25"></a><span class="w">                    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">exception</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-34-26" name="__codelineno-34-26"></a><span class="w">                    </span><span class="n">exception</span>
<a id="__codelineno-34-27" name="__codelineno-34-27"></a><span class="w">                        </span><span class="p">.</span><span class="n">InnerExceptionMessage</span><span class="p">()</span>
<a id="__codelineno-34-28" name="__codelineno-34-28"></a><span class="w">                        </span><span class="p">.</span><span class="n">Effect</span><span class="p">(</span>
<a id="__codelineno-34-29" name="__codelineno-34-29"></a><span class="w">                            </span><span class="n">err</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">err</span><span class="p">),</span>
<a id="__codelineno-34-30" name="__codelineno-34-30"></a><span class="w">                            </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* It was none, don&#39;t print anything. */</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-34-31" name="__codelineno-34-31"></a>
<a id="__codelineno-34-32" name="__codelineno-34-32"></a><span class="hll"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">exception</span><span class="w"> </span><span class="k">switch</span>
</span><a id="__codelineno-34-33" name="__codelineno-34-33"></a><span class="hll"><span class="w">                    </span><span class="p">{</span>
</span><a id="__codelineno-34-34" name="__codelineno-34-34"></a><span class="hll"><span class="w">                        </span><span class="n">ArgumentNullException</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;It was null&quot;</span><span class="p">,</span>
</span><a id="__codelineno-34-35" name="__codelineno-34-35"></a><span class="hll"><span class="w">                        </span><span class="n">OperationCanceledException</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;It was cancelled&quot;</span><span class="p">,</span>
</span><a id="__codelineno-34-36" name="__codelineno-34-36"></a><span class="hll"><span class="w">                        </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;We don&#39;t know why it crashed...&quot;</span>
</span><a id="__codelineno-34-37" name="__codelineno-34-37"></a><span class="hll"><span class="w">                    </span><span class="p">})</span>
</span><a id="__codelineno-34-38" name="__codelineno-34-38"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">msg</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CustomError</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>
<a id="__codelineno-34-39" name="__codelineno-34-39"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Result</span><span class="p">.</span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">CustomError</span><span class="o">&gt;</span><span class="p">);</span>
<a id="__codelineno-34-40" name="__codelineno-34-40"></a><span class="w">                </span><span class="p">})</span>
<a id="__codelineno-34-41" name="__codelineno-34-41"></a><span class="w">            </span><span class="p">.</span><span class="n">Match</span><span class="p">(</span><span class="n">ok</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">ok</span><span class="p">.</span><span class="n">ToString</span><span class="p">(),</span><span class="w"> </span><span class="n">err</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">err</span><span class="p">.</span><span class="n">Message</span><span class="p">)</span>
<a id="__codelineno-34-42" name="__codelineno-34-42"></a><span class="w">            </span><span class="p">.</span><span class="n">Tap</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">)</span>
<a id="__codelineno-34-43" name="__codelineno-34-43"></a><span class="w">            </span><span class="p">.</span><span class="n">Ignore</span><span class="p">();</span>
<a id="__codelineno-34-44" name="__codelineno-34-44"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><code>Try</code> can also be used as an extension method in order to add a <code>Try/Catch</code> 
handler to the end of a function that isn't expected to throw.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span>
<span class="normal"><a href="#__codelineno-35-15">15</a></span>
<span class="normal"><a href="#__codelineno-35-16">16</a></span>
<span class="normal"><a href="#__codelineno-35-17">17</a></span>
<span class="normal"><a href="#__codelineno-35-18">18</a></span>
<span class="normal"><a href="#__codelineno-35-19">19</a></span>
<span class="normal"><a href="#__codelineno-35-20">20</a></span>
<span class="normal"><a href="#__codelineno-35-21">21</a></span>
<span class="normal"><a href="#__codelineno-35-22">22</a></span>
<span class="normal"><a href="#__codelineno-35-23">23</a></span>
<span class="normal"><a href="#__codelineno-35-24">24</a></span>
<span class="normal"><a href="#__codelineno-35-25">25</a></span>
<span class="normal"><a href="#__codelineno-35-26">26</a></span>
<span class="normal"><a href="#__codelineno-35-27">27</a></span>
<span class="normal"><a href="#__codelineno-35-28">28</a></span>
<span class="normal"><a href="#__codelineno-35-29">29</a></span>
<span class="normal"><a href="#__codelineno-35-30">30</a></span>
<span class="normal"><a href="#__codelineno-35-31">31</a></span>
<span class="normal"><a href="#__codelineno-35-32">32</a></span>
<span class="normal"><a href="#__codelineno-35-33">33</a></span>
<span class="normal"><a href="#__codelineno-35-34">34</a></span>
<span class="normal"><a href="#__codelineno-35-35">35</a></span>
<span class="normal"><a href="#__codelineno-35-36">36</a></span>
<span class="normal"><a href="#__codelineno-35-37">37</a></span>
<span class="normal"><a href="#__codelineno-35-38">38</a></span>
<span class="normal"><a href="#__codelineno-35-39">39</a></span>
<span class="normal"><a href="#__codelineno-35-40">40</a></span>
<span class="normal"><a href="#__codelineno-35-41">41</a></span>
<span class="normal"><a href="#__codelineno-35-42">42</a></span>
<span class="normal"><a href="#__codelineno-35-43">43</a></span>
<span class="normal"><a href="#__codelineno-35-44">44</a></span>
<span class="normal"><a href="#__codelineno-35-45">45</a></span>
<span class="normal"><a href="#__codelineno-35-46">46</a></span>
<span class="normal"><a href="#__codelineno-35-47">47</a></span>
<span class="normal"><a href="#__codelineno-35-48">48</a></span>
<span class="normal"><a href="#__codelineno-35-49">49</a></span>
<span class="normal"><a href="#__codelineno-35-50">50</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-35-4" name="__codelineno-35-4"></a>
<a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-35-6" name="__codelineno-35-6"></a>
<a id="__codelineno-35-7" name="__codelineno-35-7"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">CustomError</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-35-8" name="__codelineno-35-8"></a>
<a id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="p">{</span>
<a id="__codelineno-35-11" name="__codelineno-35-11"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">ItNeverThrows</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-35-12" name="__codelineno-35-12"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="nf">Random</span><span class="p">().</span><span class="n">Next</span><span class="p">(</span><span class="m">100</span><span class="p">);</span>
<a id="__codelineno-35-13" name="__codelineno-35-13"></a>
<a id="__codelineno-35-14" name="__codelineno-35-14"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">ItMightThrow</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-35-15" name="__codelineno-35-15"></a><span class="w">        </span><span class="n">input</span><span class="w"> </span><span class="k">switch</span>
<a id="__codelineno-35-16" name="__codelineno-35-16"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-35-17" name="__codelineno-35-17"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">value</span><span class="p">,</span>
<a id="__codelineno-35-18" name="__codelineno-35-18"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Exception</span><span class="p">(</span><span class="s">$&quot;Value was {value}&quot;</span><span class="p">)</span>
<a id="__codelineno-35-19" name="__codelineno-35-19"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-35-20" name="__codelineno-35-20"></a>
<a id="__codelineno-35-21" name="__codelineno-35-21"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-35-22" name="__codelineno-35-22"></a><span class="w">        </span><span class="n">ItNeverThrows</span><span class="p">()</span>
<a id="__codelineno-35-23" name="__codelineno-35-23"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Try</span><span class="p">(</span><span class="n">ItMightThrow</span><span class="p">)</span>
</span><a id="__codelineno-35-24" name="__codelineno-35-24"></a><span class="w">            </span><span class="p">.</span><span class="n">Match</span><span class="p">(</span>
<a id="__codelineno-35-25" name="__codelineno-35-25"></a><span class="w">                </span><span class="n">ok</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">ok</span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Result</span><span class="p">.</span><span class="n">Ok</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">CustomError</span><span class="o">&gt;</span><span class="p">),</span>
<a id="__codelineno-35-26" name="__codelineno-35-26"></a><span class="w">                </span><span class="n">exception</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-35-27" name="__codelineno-35-27"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-35-28" name="__codelineno-35-28"></a><span class="w">                    </span><span class="c1">// Example logging.</span>
<a id="__codelineno-35-29" name="__codelineno-35-29"></a><span class="w">                    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">exception</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-35-30" name="__codelineno-35-30"></a><span class="w">                    </span><span class="n">exception</span>
<a id="__codelineno-35-31" name="__codelineno-35-31"></a><span class="w">                        </span><span class="p">.</span><span class="n">InnerExceptionMessage</span><span class="p">()</span>
<a id="__codelineno-35-32" name="__codelineno-35-32"></a><span class="w">                        </span><span class="p">.</span><span class="n">Effect</span><span class="p">(</span>
<a id="__codelineno-35-33" name="__codelineno-35-33"></a><span class="w">                            </span><span class="n">err</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">err</span><span class="p">),</span>
<a id="__codelineno-35-34" name="__codelineno-35-34"></a><span class="w">                            </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* It was none, don&#39;t print anything. */</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-35-35" name="__codelineno-35-35"></a>
<a id="__codelineno-35-36" name="__codelineno-35-36"></a><span class="hll"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">exception</span><span class="w"> </span><span class="k">switch</span>
</span><a id="__codelineno-35-37" name="__codelineno-35-37"></a><span class="hll"><span class="w">                    </span><span class="p">{</span>
</span><a id="__codelineno-35-38" name="__codelineno-35-38"></a><span class="hll"><span class="w">                        </span><span class="n">ArgumentNullException</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;It was null&quot;</span><span class="p">,</span>
</span><a id="__codelineno-35-39" name="__codelineno-35-39"></a><span class="hll"><span class="w">                        </span><span class="n">OperationCanceledException</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;It was cancelled&quot;</span><span class="p">,</span>
</span><a id="__codelineno-35-40" name="__codelineno-35-40"></a><span class="hll"><span class="w">                        </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;We don&#39;t know why it crashed...&quot;</span>
</span><a id="__codelineno-35-41" name="__codelineno-35-41"></a><span class="hll"><span class="w">                    </span><span class="p">})</span>
</span><a id="__codelineno-35-42" name="__codelineno-35-42"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">msg</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CustomError</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>
<a id="__codelineno-35-43" name="__codelineno-35-43"></a><span class="w">                    </span><span class="p">.</span><span class="n">Pipe</span><span class="p">(</span><span class="n">Result</span><span class="p">.</span><span class="n">Error</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">CustomError</span><span class="o">&gt;</span><span class="p">);</span>
<a id="__codelineno-35-44" name="__codelineno-35-44"></a><span class="w">                </span><span class="p">})</span>
<a id="__codelineno-35-45" name="__codelineno-35-45"></a><span class="w">            </span><span class="p">.</span><span class="n">Match</span><span class="p">(</span>
<a id="__codelineno-35-46" name="__codelineno-35-46"></a><span class="w">                </span><span class="n">ok</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">ok</span><span class="p">.</span><span class="n">ToString</span><span class="p">(),</span>
<a id="__codelineno-35-47" name="__codelineno-35-47"></a><span class="w">                </span><span class="n">err</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">err</span><span class="p">.</span><span class="n">Message</span><span class="p">)</span>
<a id="__codelineno-35-48" name="__codelineno-35-48"></a><span class="w">            </span><span class="p">.</span><span class="n">Tap</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">)</span>
<a id="__codelineno-35-49" name="__codelineno-35-49"></a><span class="w">            </span><span class="p">.</span><span class="n">Ignore</span><span class="p">();</span>
<a id="__codelineno-35-50" name="__codelineno-35-50"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="inner-exception-messages">Inner Exception Messages</h3>
<p>Exceptions may or may not have an inner exception message. There is a convenience method called <code>InnerExceptionMessage()</code> which returns <code>Option&lt;string&gt;</code> to safely handle getting an inner exception method.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-36-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-36-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-36-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-36-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-36-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-36-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-36-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-36-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-36-10">10</a></span>
<span class="normal"><a href="#__codelineno-36-11">11</a></span>
<span class="normal"><a href="#__codelineno-36-12">12</a></span>
<span class="normal"><a href="#__codelineno-36-13">13</a></span>
<span class="normal"><a href="#__codelineno-36-14">14</a></span>
<span class="normal"><a href="#__codelineno-36-15">15</a></span>
<span class="normal"><a href="#__codelineno-36-16">16</a></span>
<span class="normal"><a href="#__codelineno-36-17">17</a></span>
<span class="normal"><a href="#__codelineno-36-18">18</a></span>
<span class="normal"><a href="#__codelineno-36-19">19</a></span>
<span class="normal"><a href="#__codelineno-36-20">20</a></span>
<span class="normal"><a href="#__codelineno-36-21">21</a></span>
<span class="normal"><a href="#__codelineno-36-22">22</a></span>
<span class="normal"><a href="#__codelineno-36-23">23</a></span>
<span class="normal"><a href="#__codelineno-36-24">24</a></span>
<span class="normal"><a href="#__codelineno-36-25">25</a></span>
<span class="normal"><a href="#__codelineno-36-26">26</a></span>
<span class="normal"><a href="#__codelineno-36-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-36-6" name="__codelineno-36-6"></a>
<a id="__codelineno-36-7" name="__codelineno-36-7"></a><span class="k">public</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="nf">CustomError</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Message</span><span class="p">);</span>
<a id="__codelineno-36-8" name="__codelineno-36-8"></a>
<a id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-36-10" name="__codelineno-36-10"></a><span class="p">{</span>
<a id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-36-13" name="__codelineno-36-13"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="nf">Exception</span><span class="p">(</span><span class="s">&quot;outer message&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Exception</span><span class="p">(</span><span class="s">&quot;Inner message&quot;</span><span class="p">))</span>
<a id="__codelineno-36-14" name="__codelineno-36-14"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">InnerExceptionMessage</span><span class="p">()</span>
</span><a id="__codelineno-36-15" name="__codelineno-36-15"></a><span class="w">            </span><span class="p">.</span><span class="n">Effect</span><span class="p">(</span>
<a id="__codelineno-36-16" name="__codelineno-36-16"></a><span class="w">                </span><span class="c1">// This will print because there is an inner exception.</span>
<a id="__codelineno-36-17" name="__codelineno-36-17"></a><span class="w">                </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">,</span>
<a id="__codelineno-36-18" name="__codelineno-36-18"></a><span class="w">                </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* There was no inner exception */</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-36-19" name="__codelineno-36-19"></a>
<a id="__codelineno-36-20" name="__codelineno-36-20"></a><span class="w">        </span><span class="c1">// Nothing will print here because there was no inner exception.</span>
<a id="__codelineno-36-21" name="__codelineno-36-21"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="nf">Exception</span><span class="p">(</span><span class="s">&quot;outer message&quot;</span><span class="p">)</span>
<a id="__codelineno-36-22" name="__codelineno-36-22"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">InnerExceptionMessage</span><span class="p">()</span>
</span><a id="__codelineno-36-23" name="__codelineno-36-23"></a><span class="w">            </span><span class="p">.</span><span class="n">Effect</span><span class="p">(</span>
<a id="__codelineno-36-24" name="__codelineno-36-24"></a><span class="w">                </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">,</span>
<a id="__codelineno-36-25" name="__codelineno-36-25"></a><span class="w">                </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* There was no inner exception */</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-36-26" name="__codelineno-36-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-36-27" name="__codelineno-36-27"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="unit">Unit</h3>
<p>When performing an action, instead of returning void, we can return the type called <code>Unit</code> which represents no return value. This can be used to continue piping more functions after performing an action that would return void. Calling the second <code>Effect</code> would not have been possible without the <code>Unit</code> type.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Program.cs</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-37-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-37-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-37-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-37-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-37-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-37-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-37-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-37-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-37-10">10</a></span>
<span class="normal"><a href="#__codelineno-37-11">11</a></span>
<span class="normal"><a href="#__codelineno-37-12">12</a></span>
<span class="normal"><a href="#__codelineno-37-13">13</a></span>
<span class="normal"><a href="#__codelineno-37-14">14</a></span>
<span class="normal"><a href="#__codelineno-37-15">15</a></span>
<span class="normal"><a href="#__codelineno-37-16">16</a></span>
<span class="normal"><a href="#__codelineno-37-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">ScratchPad</span><span class="p">;</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Functional</span><span class="p">;</span>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="k">using</span><span class="w"> </span><span class="nn">static</span><span class="w"> </span><span class="n">Functional</span><span class="p">.</span><span class="n">Prelude</span><span class="p">;</span>
<a id="__codelineno-37-5" name="__codelineno-37-5"></a>
<a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-37-7" name="__codelineno-37-7"></a>
<a id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<a id="__codelineno-37-9" name="__codelineno-37-9"></a><span class="p">{</span>
<a id="__codelineno-37-10" name="__codelineno-37-10"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-37-11" name="__codelineno-37-11"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-37-12" name="__codelineno-37-12"></a><span class="w">        </span><span class="c1">// This should print &quot;value&quot; and then &quot;()&quot; on the following line.</span>
<a id="__codelineno-37-13" name="__codelineno-37-13"></a><span class="w">        </span><span class="n">Some</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span>
<a id="__codelineno-37-14" name="__codelineno-37-14"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Effect</span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="k">value</span><span class="p">),</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;No value&quot;</span><span class="p">))</span>
</span><a id="__codelineno-37-15" name="__codelineno-37-15"></a><span class="hll"><span class="w">            </span><span class="p">.</span><span class="n">Effect</span><span class="p">(</span><span class="n">unit</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">unit</span><span class="p">.</span><span class="n">ToString</span><span class="p">()));</span>
</span><a id="__codelineno-37-16" name="__codelineno-37-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-17" name="__codelineno-37-17"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 <a href="https://github.com/th3oth3rjak3" target="_blank" rel="noopener">Jake Hathaway</a>    
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/th3oth3rjak3" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/jacob-hathaway-15a8b8198/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigtation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.af256bd8.min.js"></script>
      
    
  </body>
</html>